<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Setup Build Environment - Glean - Cross-platform Telemetry library</title>
        
        


        <!-- Custom HTML head -->
        


        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        
        <link rel="icon" href="../../favicon.svg">
        
        
        <link rel="shortcut icon" href="../../favicon.png">
        
        <link rel="stylesheet" href="../../css/variables.css">
        <link rel="stylesheet" href="../../css/general.css">
        <link rel="stylesheet" href="../../css/chrome.css">
        <link rel="stylesheet" href="../../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../../FontAwesome/css/font-awesome.css">
        
        <link rel="stylesheet" href="../../fonts/fonts.css">
        

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../../highlight.css">
        <link rel="stylesheet" href="../../tomorrow-night.css">
        <link rel="stylesheet" href="../../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        
        <link rel="stylesheet" href="../../glean.css">
        
        <link rel="stylesheet" href="../../mermaid.css">
        

        
        <!-- MathJax -->
        <script async type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
        
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="../../index.html">Glean</a></li><li class="chapter-item expanded "><a href="../../user/index.html"><strong aria-hidden="true">1.</strong> Using the Glean SDK</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../user/adding-glean-to-your-project.html"><strong aria-hidden="true">1.1.</strong> Adding Glean to your project</a></li><li class="chapter-item expanded "><a href="../../user/general-api.html"><strong aria-hidden="true">1.2.</strong> The General API</a></li><li class="chapter-item expanded "><a href="../../user/adding-new-metrics.html"><strong aria-hidden="true">1.3.</strong> Adding new metrics</a></li><li class="chapter-item expanded "><a href="../../user/metric-parameters.html"><strong aria-hidden="true">1.4.</strong> Metric parameters</a></li><li class="chapter-item expanded "><a href="../../user/testing-metrics.html"><strong aria-hidden="true">1.5.</strong> Testing metrics</a></li><li class="chapter-item expanded "><a href="../../user/debugging/index.html"><strong aria-hidden="true">1.6.</strong> Debugging products using Glean</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../user/debugging/debug-ping-view.html"><strong aria-hidden="true">1.6.1.</strong> Glean Debug Ping View</a></li><li class="chapter-item expanded "><a href="../../user/debugging/android.html"><strong aria-hidden="true">1.6.2.</strong> Android</a></li><li class="chapter-item expanded "><a href="../../user/debugging/ios.html"><strong aria-hidden="true">1.6.3.</strong> iOS</a></li><li class="chapter-item expanded "><a href="../../user/debugging/python.html"><strong aria-hidden="true">1.6.4.</strong> Python</a></li></ol></li><li class="chapter-item expanded "><a href="../../user/error-reporting.html"><strong aria-hidden="true">1.7.</strong> Error reporting</a></li><li class="chapter-item expanded "><a href="../../user/experiments-api.html"><strong aria-hidden="true">1.8.</strong> Using the experiments API</a></li></ol></li><li class="chapter-item expanded "><a href="../../user/metrics/index.html"><strong aria-hidden="true">2.</strong> Metric types</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../user/metrics/boolean.html"><strong aria-hidden="true">2.1.</strong> Boolean</a></li><li class="chapter-item expanded "><a href="../../user/metrics/labeled_booleans.html"><strong aria-hidden="true">2.2.</strong> Labeled Booleans</a></li><li class="chapter-item expanded "><a href="../../user/metrics/counter.html"><strong aria-hidden="true">2.3.</strong> Counter</a></li><li class="chapter-item expanded "><a href="../../user/metrics/labeled_counters.html"><strong aria-hidden="true">2.4.</strong> Labeled Counters</a></li><li class="chapter-item expanded "><a href="../../user/metrics/jwe.html"><strong aria-hidden="true">2.5.</strong> JWE</a></li><li class="chapter-item expanded "><a href="../../user/metrics/string.html"><strong aria-hidden="true">2.6.</strong> String</a></li><li class="chapter-item expanded "><a href="../../user/metrics/labeled_strings.html"><strong aria-hidden="true">2.7.</strong> Labeled Strings</a></li><li class="chapter-item expanded "><a href="../../user/metrics/string_list.html"><strong aria-hidden="true">2.8.</strong> String List</a></li><li class="chapter-item expanded "><a href="../../user/metrics/timespan.html"><strong aria-hidden="true">2.9.</strong> Timespan</a></li><li class="chapter-item expanded "><a href="../../user/metrics/timing_distribution.html"><strong aria-hidden="true">2.10.</strong> Timing Distribution</a></li><li class="chapter-item expanded "><a href="../../user/metrics/memory_distribution.html"><strong aria-hidden="true">2.11.</strong> Memory Distribution</a></li><li class="chapter-item expanded "><a href="../../user/metrics/uuid.html"><strong aria-hidden="true">2.12.</strong> UUID</a></li><li class="chapter-item expanded "><a href="../../user/metrics/datetime.html"><strong aria-hidden="true">2.13.</strong> Datetime</a></li><li class="chapter-item expanded "><a href="../../user/metrics/event.html"><strong aria-hidden="true">2.14.</strong> Event</a></li><li class="chapter-item expanded "><a href="../../user/metrics/custom_distribution.html"><strong aria-hidden="true">2.15.</strong> Custom Distribution</a></li><li class="chapter-item expanded "><a href="../../user/metrics/quantity.html"><strong aria-hidden="true">2.16.</strong> Quantity</a></li></ol></li><li class="chapter-item expanded "><a href="../../user/pings/index.html"><strong aria-hidden="true">3.</strong> Pings</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../user/pings/ping-schedules-and-timings.html"><strong aria-hidden="true">3.1.</strong> Ping schedules and timings overview</a></li><li class="chapter-item expanded "><a href="../../user/pings/baseline.html"><strong aria-hidden="true">3.2.</strong> Baseline Ping</a></li><li class="chapter-item expanded "><a href="../../user/pings/deletion_request.html"><strong aria-hidden="true">3.3.</strong> Deletion Request Ping</a></li><li class="chapter-item expanded "><a href="../../user/pings/metrics.html"><strong aria-hidden="true">3.4.</strong> Metrics Ping</a></li><li class="chapter-item expanded "><a href="../../user/pings/events.html"><strong aria-hidden="true">3.5.</strong> Events Ping</a></li><li class="chapter-item expanded "><a href="../../user/pings/custom.html"><strong aria-hidden="true">3.6.</strong> Custom Pings</a></li><li class="chapter-item expanded "><a href="../../user/pings/testing-custom-pings.html"><strong aria-hidden="true">3.7.</strong> Testing custom pings</a></li></ol></li><li class="chapter-item expanded "><a href="../../user/android/index.html"><strong aria-hidden="true">4.</strong> Android-specific information</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../user/android/android-build-configuration-options.html"><strong aria-hidden="true">4.1.</strong> Android build configuration options</a></li><li class="chapter-item expanded "><a href="../../user/android/android-offline-builds.html"><strong aria-hidden="true">4.2.</strong> Android offline builds</a></li></ol></li><li class="chapter-item expanded "><a href="../../user/focused-use-cases.html"><strong aria-hidden="true">5.</strong> Focused Use Cases</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../user/instrument-android-crashes-example.html"><strong aria-hidden="true">5.1.</strong> Instrumenting Android crashes with the Glean SDK</a></li></ol></li><li class="chapter-item expanded "><a href="../../user/collected-metrics/metrics.html"><strong aria-hidden="true">6.</strong> Metrics collected by the Glean SDK</a></li><li class="chapter-item expanded affix "><li class="part-title">Developing the Glean SDK</li><li class="chapter-item expanded "><a href="../../dev/testing.html"><strong aria-hidden="true">7.</strong> Testing</a></li><li class="chapter-item expanded "><a href="../../dev/ci.html"><strong aria-hidden="true">8.</strong> Continuous Integration</a></li><li class="chapter-item expanded "><a href="../../dev/cut-a-new-release.html"><strong aria-hidden="true">9.</strong> Release process</a></li><li class="chapter-item expanded "><a href="../../contributing.html"><strong aria-hidden="true">10.</strong> Contributing</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../code_coverage.html"><strong aria-hidden="true">10.1.</strong> Code coverage</a></li></ol></li><li class="chapter-item expanded "><a href="../../dev/docs.html"><strong aria-hidden="true">11.</strong> Developing documentation</a></li><li class="chapter-item expanded "><a href="../../dev/upgrading-glean-parser.html"><strong aria-hidden="true">12.</strong> Upgrading glean_parser</a></li><li class="chapter-item expanded "><a href="../../dev/android/index.html"><strong aria-hidden="true">13.</strong> Android bindings</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../dev/android/setup-android-build-environment.html"><strong aria-hidden="true">13.1.</strong> Setup Build Environment</a></li><li class="chapter-item expanded "><a href="../../dev/android/sdk-ndk-versions.html"><strong aria-hidden="true">13.2.</strong> Android SDK/NDK versions</a></li><li class="chapter-item expanded "><a href="../../dev/android/development-with-android-components.html"><strong aria-hidden="true">13.3.</strong> Development with android-components</a></li><li class="chapter-item expanded "><a href="../../dev/android/locally-published-components-in-fenix.html"><strong aria-hidden="true">13.4.</strong> Locally-published components in Fenix</a></li></ol></li><li class="chapter-item expanded "><a href="../../dev/ios/index.html"><strong aria-hidden="true">14.</strong> iOS bindings</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../dev/ios/setup-ios-build-environment.html"><strong aria-hidden="true">14.1.</strong> Setup Build Environment</a></li><li class="chapter-item expanded "><a href="../../dev/ios/debug-glean-on-ios.html"><strong aria-hidden="true">14.2.</strong> Debugging Different Versions of Glean</a></li></ol></li><li class="chapter-item expanded "><a href="../../dev/python/index.html"><strong aria-hidden="true">15.</strong> Python bindings</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../dev/python/setting-up-python-build-environment.html" class="active"><strong aria-hidden="true">15.1.</strong> Setup Build Environment</a></li></ol></li><li class="chapter-item expanded "><a href="../../dev/core/index.html"><strong aria-hidden="true">16.</strong> Rust Component</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../dev/core/documentation-guidelines.html"><strong aria-hidden="true">16.1.</strong> Documentation guidelines</a></li><li class="chapter-item expanded "><a href="../../dev/core/dependency-management.html"><strong aria-hidden="true">16.2.</strong> Dependency Management</a></li><li class="chapter-item expanded "><a href="../../dev/core/new-metric-type.html"><strong aria-hidden="true">16.3.</strong> Adding a new metric type</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../dev/core/new-metric-type/ffi.html"><strong aria-hidden="true">16.3.1.</strong> FFI</a></li><li class="chapter-item expanded "><a href="../../dev/core/new-metric-type/kotlin.html"><strong aria-hidden="true">16.3.2.</strong> Kotlin</a></li><li class="chapter-item expanded "><a href="../../dev/core/new-metric-type/swift.html"><strong aria-hidden="true">16.3.3.</strong> Swift</a></li><li class="chapter-item expanded "><a href="../../dev/core/new-metric-type/python.html"><strong aria-hidden="true">16.3.4.</strong> Python</a></li></ol></li></ol></li><li class="chapter-item expanded "><a href="../../dev/ffi/index.html"><strong aria-hidden="true">17.</strong> FFI Layer</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../dev/ffi/when-to-use-what-in-the-ffi.html"><strong aria-hidden="true">17.1.</strong> When/How FFI</a></li></ol></li><li class="chapter-item expanded "><a href="../../dev/core/internal/index.html"><strong aria-hidden="true">18.</strong> Internal implementation details</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../dev/core/internal/reserved-ping-names.html"><strong aria-hidden="true">18.1.</strong> Reserved ping names</a></li><li class="chapter-item expanded "><a href="../../dev/core/internal/clearing.html"><strong aria-hidden="true">18.2.</strong> Clearing metrics when disabling/enabling Glean</a></li><li class="chapter-item expanded "><a href="../../dev/core/internal/payload.html"><strong aria-hidden="true">18.3.</strong> Payload format</a></li><li class="chapter-item expanded "><a href="../../dev/core/internal/directory-structure.html"><strong aria-hidden="true">18.4.</strong> Directory &amp; file structure</a></li><li class="chapter-item expanded "><a href="../../dev/core/internal/debug-pings.html"><strong aria-hidden="true">18.5.</strong> Debug Pings</a></li><li class="chapter-item expanded "><a href="../../dev/core/internal/upload.html"><strong aria-hidden="true">18.6.</strong> Upload mechanism</a></li><li class="chapter-item expanded "><a href="../../dev/core/internal/implementations.html"><strong aria-hidden="true">18.7.</strong> Implementations</a></li></ol></li><li class="chapter-item expanded "><a href="../../api/index.html"><strong aria-hidden="true">19.</strong> API Documentation</a></li><li class="chapter-item expanded affix "><li class="part-title">Appendix</li><li class="chapter-item expanded "><a href="../../appendix/glossary.html"><strong aria-hidden="true">20.</strong> Glossary</a></li><li class="chapter-item expanded "><a href="../../appendix/changelog.html"><strong aria-hidden="true">21.</strong> Changelog</a></li><li class="chapter-item expanded "><a href="../../appendix/twig.html"><strong aria-hidden="true">22.</strong> This Week in Glean</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                        
                    </div>

                    <h1 class="menu-title">Glean - Cross-platform Telemetry library</h1>

                    <div class="right-buttons">
                        <a href="../../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        
                        <a href="https://github.com/mozilla/glean" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                        
                    </div>
                </div>

                
                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" name="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1><a class="header" href="#setup-the-python-build-environment" id="setup-the-python-build-environment">Setup the Python Build Environment</a></h1>
<p>This document describes how to set up an environment for the development of the Glean Python bindings.</p>
<p>Instructions for installing a copy of the Glean Python bindings into your own environment for use in your project are described in <a href="../../user/adding-glean-to-your-project.html">adding Glean to your project</a>.</p>
<h2><a class="header" href="#prerequisites" id="prerequisites">Prerequisites</a></h2>
<p>Glean requires Python 3.6 or later.</p>
<p>Make sure it is installed on your system and accessible on the <code>PATH</code> as <code>python3</code>.</p>
<h3><a class="header" href="#setting-up-rust" id="setting-up-rust">Setting up Rust</a></h3>
<p>If you've already set up Rust for building Glean for Android or iOS, you already have everything you need and can skip this section.</p>
<p>Rust can be installed using <code>rustup</code>, with the following commands:</p>
<ul>
<li><code>curl https://sh.rustup.rs -sSf | sh</code></li>
<li><code>rustup update</code></li>
</ul>
<h2><a class="header" href="#create-a-virtual-environment" id="create-a-virtual-environment">Create a virtual environment</a></h2>
<p>It is recommended to do all Python development inside a virtual environment to make sure there are no interactions with other Python libraries installed on your system.</p>
<p>You may want to manage your own virtual environment if, for example, you are developing a library that is using Glean and you want to install Glean into it.  If you are just developing Glean itself, however, Glean's <code>Makefile</code> will handle the creation and use of a virtual environment automatically (though the <code>Makefile</code> unfortunately does not work on Microsoft Windows).</p>
<p>The instructions below all have both the manual instructions and the <code>Makefile</code> shortcuts.</p>
<h3><a class="header" href="#manual-method" id="manual-method">Manual method</a></h3>
<p>The following instructions use the basic <a href="https://docs.python.org/3/library/venv.html">virtual environment functionality that comes in the Python standard library</a>.
Other higher level tools exist to manage virtual environments, such as <a href="https://pipenv.kennethreitz.org/en/latest/">pipenv</a> and <a href="https://docs.conda.io/en/latest/">conda</a>.
These will work just as well, but are not documented here.
Using an alternative tool would replace the instructions in this section only, but all other instructions below would remain the same.</p>
<p>To create a virtual environment, enter the following command, replacing <code>&lt;venv&gt;</code> with the path to the virtual environment you want to create.  You will need to do this only once.</p>
<pre><code class="language-bash">  $ python3 -m venv &lt;venv&gt;
</code></pre>
<p>Then activate the environment. You will need to do this for each new shell session when you want to develop Glean.
The command to use depends on your shell environment.</p>
<table><thead><tr><th>Platform</th><th>Shell</th><th>Command to activate virtual environment</th></tr></thead><tbody>
<tr><td>POSIX</td><td>bash/zsh</td><td><code>source &lt;venv&gt;/bin/activate</code></td></tr>
<tr><td></td><td>fish</td><td><code>. &lt;venv&gt;/bin/activate.fish</code></td></tr>
<tr><td></td><td>csh/tcsh</td><td><code>source &lt;venv&gt;bin/activate.csh</code></td></tr>
<tr><td></td><td>PowerShell Core</td><td><code>&lt;venv&gt;/bin/Activate.ps1</code></td></tr>
<tr><td>Windows</td><td>cmd.exe</td><td><code>&lt;venv&gt;\Scripts\activate.bat</code></td></tr>
<tr><td></td><td>PowerShell</td><td><code>&lt;venv&gt;\Scripts\Activate.ps1</code></td></tr>
</tbody></table>
<p>Lastly, install Glean's Python development dependencies into the virtual environment.</p>
<pre><code class="language-bash">cd glean-core/python
pip install -r requirements_dev.txt
</code></pre>
<h3><a class="header" href="#makefile-method" id="makefile-method">Makefile method</a></h3>
<pre><code class="language-bash">  $ make python-setup
</code></pre>
<p>The default location of the virtual environment used by the make file is <code>glean-core/python/.venvX.Y</code>, where <code>X.Y</code> is the version of Python in use. This makes it possible to build and test for multiple versions of Python in the same checkout.</p>
<blockquote>
<p><em>Note:</em> If you wish to change the location of the virtual environment that the <code>Makefile</code> uses, pass the <code>GLEAN_PYENV</code> environment variable: <code>make python-setup GLEAN_PYENV=mypyenv</code>.</p>
</blockquote>
<p>By default, the <code>Makefile</code> installs the latest version available of each of Glean's dependencies.  If you wish to install the minimum required versions instead, (useful primarily to ensure that Glean doesn't unintentionally use newer APIs in its dependencies) pass the <code>GLEAN_PYDEPS=min</code> environment variable: <code>make python-setup GLEAN_PYDEPS=min</code>.</p>
<h2><a class="header" href="#build-the-python-bindings" id="build-the-python-bindings">Build the Python bindings</a></h2>
<h3><a class="header" href="#manual-method-1" id="manual-method-1">Manual method</a></h3>
<p>Building the Python bindings also builds the Rust shared object for the Glean SDK core.</p>
<pre><code class="language-bash">  $ cd glean-core/python
  $ python setup.py build install
</code></pre>
<h3><a class="header" href="#makefile-method-1" id="makefile-method-1">Makefile method</a></h3>
<p>This will implicitly setup the Python environment, rebuild the Rust core and then build the Python bindings.</p>
<pre><code class="language-bash">  $ make build-python
</code></pre>
<h2><a class="header" href="#running-the-python-unit-tests" id="running-the-python-unit-tests">Running the Python unit tests</a></h2>
<h3><a class="header" href="#manual-method-2" id="manual-method-2">Manual method</a></h3>
<p>Make sure the Python bindings are built, then:</p>
<pre><code class="language-bash">  $ cd glean-core/python
  $ py.test
</code></pre>
<h3><a class="header" href="#makefile-method-2" id="makefile-method-2">Makefile method</a></h3>
<p>The following will run the Python unit tests using <code>py.test</code>:</p>
<pre><code class="language-bash">  $ make test-python
</code></pre>
<p>You can send extra parameters to the <code>py.test</code> command by setting the <code>PYTEST_ARGS</code> variable:</p>
<pre><code class="language-bash">  $ make test-python PYTEST_ARGS=&quot;-s --pdb&quot;
</code></pre>
<h2><a class="header" href="#viewing-logging-output" id="viewing-logging-output">Viewing logging output</a></h2>
<p>Log messages (whether originating in Python or Rust) are emitted using the Python standard library's <a href="https://docs.python.org/3/library/logging.html"><code>logging</code> module</a>.
This module provides a lot of possibilities for customization, but the easiest way to control the log level globally is with <a href="https://docs.python.org/3/library/logging.html#logging.basicConfig"><code>logging.basicConfig</code></a>:</p>
<pre><code class="language-python">import logging
logging.basicConfig(level=logging.DEBUG)
</code></pre>
<h2><a class="header" href="#linting-formatting-and-type-checking" id="linting-formatting-and-type-checking">Linting, formatting and type checking</a></h2>
<p>The Glean Python bindings use the following tools:</p>
<ul>
<li>Linting: <a href="http://flake8.pycqa.org/en/latest/">flake8</a></li>
<li>Formatting: <a href="https://black.readthedocs.io/en/stable/">black</a></li>
<li>Type-checking: <a href="http://mypy-lang.org/">mypy</a></li>
</ul>
<h3><a class="header" href="#manual-method-3" id="manual-method-3">Manual method</a></h3>
<pre><code class="language-bash">  $ cd glean-core/python
  $ flake8 glean tests
  $ black glean tests
  $ mypy glean
</code></pre>
<h3><a class="header" href="#makefile-method-3" id="makefile-method-3">Makefile method</a></h3>
<p>To just check the lints:</p>
<pre><code class="language-bash">  $ make pythonlint
</code></pre>
<p>To reformat the Python files in-place:</p>
<pre><code class="language-bash">  $ make pythonfmt
</code></pre>
<h2><a class="header" href="#building-the-python-api-docs" id="building-the-python-api-docs">Building the Python API docs</a></h2>
<p>The Python API docs are built using <a href="https://pdoc3.github.io/pdoc/">pdoc3</a>.</p>
<h3><a class="header" href="#manual-method-4" id="manual-method-4">Manual method</a></h3>
<pre><code class="language-bash">  $ python -m pdoc --html glean --force -o build/docs/python
</code></pre>
<h3><a class="header" href="#makefile-method-4" id="makefile-method-4">Makefile method</a></h3>
<pre><code class="language-bash">  $ make python-docs
</code></pre>
<h2><a class="header" href="#building-wheels-for-linux" id="building-wheels-for-linux">Building wheels for Linux</a></h2>
<p>Building on Linux using the above instructions will create Linux binaries that dynamically link against the version of <code>libc</code> installed on your machine. 
This generally will not be portable to other Linux distributions, and PyPI will not even allow it to be uploaded.
In order to create wheels that can be installed on the broadest range of Linux distributions, the Python Packaging Authority's <a href="https://github.com/pypa/manylinux">manylinux</a> project maintains a Docker image for building compatible Linux wheels.</p>
<p>The CircleCI configuration handles making these wheels from tagged releases.
If you need to reproduce this locally, see the CircleCI job <code>pypi-linux-release</code> for an example of how this Docker image is used in practice.</p>
<h2><a class="header" href="#building-wheels-for-windows" id="building-wheels-for-windows">Building wheels for Windows</a></h2>
<p>The official wheels for Windows are produced on a Linux virtual machine using the Mingw toolchain.</p>
<p>The CircleCI configuration handles making these wheels from tagged releases.
If you need to reproduce this locally, see the CircleCI job <code>pypi-windows-release</code> for an example of how this is done in practice.</p>
<footer id="open-on-gh">Found a bug? <a href="https://github.com/mozilla/glean/edit/main/docs/dev/python/setting-up-python-build-environment.md">Edit this file on GitHub.</a></footer>
                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        
                            <a rel="prev" href="../../dev/python/index.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                        

                        
                            <a rel="next" href="../../dev/core/index.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                
                    <a rel="prev" href="../../dev/python/index.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                

                
                    <a rel="next" href="../../dev/core/index.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
                
            </nav>

        </div>

        

        

        

        
        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        

        

        
        <script src="../../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../searcher.js" type="text/javascript" charset="utf-8"></script>
        

        <script src="../../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        
        <script type="text/javascript" src="../../tabs.js"></script>
        
        <script type="text/javascript" src="../../mermaid.min.js"></script>
        
        <script type="text/javascript" src="../../mermaid-init.js"></script>
        
        <script type="text/javascript" src="../../chart.min.js"></script>
        
        <script type="text/javascript" src="../../chart-distributions.js"></script>
        
        <script type="text/javascript" src="../../chart-distributions-ui.js"></script>
        

        

    </body>
</html>
