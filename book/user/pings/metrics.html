<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Metrics Ping - Glean - Cross-platform Telemetry library</title>
        

        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="shortcut icon" href="../../favicon.png">
        <link rel="stylesheet" href="../../css/variables.css">
        <link rel="stylesheet" href="../../css/general.css">
        <link rel="stylesheet" href="../../css/chrome.css">
        <link rel="stylesheet" href="../../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../../FontAwesome/css/font-awesome.css">
        <link href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" rel="stylesheet" type="text/css">
        <link href="https://fonts.googleapis.com/css?family=Source+Code+Pro:500" rel="stylesheet" type="text/css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../../highlight.css">
        <link rel="stylesheet" href="../../tomorrow-night.css">
        <link rel="stylesheet" href="../../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        
        <link rel="stylesheet" href="../../glean.css">
        

        
        <!-- MathJax -->
        <script async type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
        
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "light" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div id="sidebar-scrollbox" class="sidebar-scrollbox">
                <ol class="chapter"><li class="expanded "><a href="../../index.html"><strong aria-hidden="true">1.</strong> Glean</a></li><li class="expanded "><a href="../../user/index.html"><strong aria-hidden="true">2.</strong> Using the Glean SDK</a></li><li><ol class="section"><li class="expanded "><a href="../../user/adding-glean-to-your-project.html"><strong aria-hidden="true">2.1.</strong> Adding Glean to your project</a></li><li class="expanded "><a href="../../user/general-api.html"><strong aria-hidden="true">2.2.</strong> The General API</a></li><li class="expanded "><a href="../../user/adding-new-metrics.html"><strong aria-hidden="true">2.3.</strong> Adding new metrics</a></li><li class="expanded "><a href="../../user/metric-parameters.html"><strong aria-hidden="true">2.4.</strong> Metric parameters</a></li><li class="expanded "><a href="../../user/testing-metrics.html"><strong aria-hidden="true">2.5.</strong> Testing metrics</a></li><li class="expanded "><a href="../../user/debugging/index.html"><strong aria-hidden="true">2.6.</strong> Debugging products using Glean</a></li><li><ol class="section"><li class="expanded "><a href="../../user/debugging/android.html"><strong aria-hidden="true">2.6.1.</strong> Android</a></li><li class="expanded "><a href="../../user/debugging/ios.html"><strong aria-hidden="true">2.6.2.</strong> iOS</a></li><li class="expanded "><a href="../../user/debugging/python.html"><strong aria-hidden="true">2.6.3.</strong> Python</a></li></ol></li><li class="expanded "><a href="../../user/error-reporting.html"><strong aria-hidden="true">2.7.</strong> Error reporting</a></li><li class="expanded "><a href="../../user/experiments-api.html"><strong aria-hidden="true">2.8.</strong> Using the experiments API</a></li><li class="expanded "><a href="../../user/metrics/index.html"><strong aria-hidden="true">2.9.</strong> Metric types</a></li><li><ol class="section"><li class="expanded "><a href="../../user/metrics/boolean.html"><strong aria-hidden="true">2.9.1.</strong> Boolean</a></li><li class="expanded "><a href="../../user/metrics/counter.html"><strong aria-hidden="true">2.9.2.</strong> Counter</a></li><li class="expanded "><a href="../../user/metrics/labeled_counters.html"><strong aria-hidden="true">2.9.3.</strong> Labeled Counters</a></li><li class="expanded "><a href="../../user/metrics/string.html"><strong aria-hidden="true">2.9.4.</strong> String</a></li><li class="expanded "><a href="../../user/metrics/labeled_strings.html"><strong aria-hidden="true">2.9.5.</strong> Labeled Strings</a></li><li class="expanded "><a href="../../user/metrics/string_list.html"><strong aria-hidden="true">2.9.6.</strong> String List</a></li><li class="expanded "><a href="../../user/metrics/timespan.html"><strong aria-hidden="true">2.9.7.</strong> Timespan</a></li><li class="expanded "><a href="../../user/metrics/timing_distribution.html"><strong aria-hidden="true">2.9.8.</strong> Timing Distribution</a></li><li class="expanded "><a href="../../user/metrics/memory_distribution.html"><strong aria-hidden="true">2.9.9.</strong> Memory Distribution</a></li><li class="expanded "><a href="../../user/metrics/uuid.html"><strong aria-hidden="true">2.9.10.</strong> UUID</a></li><li class="expanded "><a href="../../user/metrics/datetime.html"><strong aria-hidden="true">2.9.11.</strong> Datetime</a></li><li class="expanded "><a href="../../user/metrics/event.html"><strong aria-hidden="true">2.9.12.</strong> Event</a></li><li class="expanded "><a href="../../user/metrics/custom_distribution.html"><strong aria-hidden="true">2.9.13.</strong> Custom Distribution</a></li><li class="expanded "><a href="../../user/metrics/quantity.html"><strong aria-hidden="true">2.9.14.</strong> Quantity</a></li></ol></li><li class="expanded "><a href="../../user/pings/index.html"><strong aria-hidden="true">2.10.</strong> Pings</a></li><li><ol class="section"><li class="expanded "><a href="../../user/pings/baseline.html"><strong aria-hidden="true">2.10.1.</strong> Baseline Ping</a></li><li class="expanded "><a href="../../user/pings/deletion_request.html"><strong aria-hidden="true">2.10.2.</strong> Deletion Request Ping</a></li><li class="expanded "><a href="../../user/pings/metrics.html" class="active"><strong aria-hidden="true">2.10.3.</strong> Metrics Ping</a></li><li class="expanded "><a href="../../user/pings/events.html"><strong aria-hidden="true">2.10.4.</strong> Events Ping</a></li><li class="expanded "><a href="../../user/pings/custom.html"><strong aria-hidden="true">2.10.5.</strong> Custom Pings</a></li><li class="expanded "><a href="../../user/pings/testing-custom-pings.html"><strong aria-hidden="true">2.10.6.</strong> Testing custom pings</a></li></ol></li><li class="expanded "><a href="../../user/android-build-configuration-options.html"><strong aria-hidden="true">2.11.</strong> Android build configuration options</a></li><li class="expanded "><a href="../../user/focused-use-cases.html"><strong aria-hidden="true">2.12.</strong> Focused Use Cases</a></li><li><ol class="section"><li class="expanded "><a href="../../user/instrument-android-crashes-example.html"><strong aria-hidden="true">2.12.1.</strong> Instrumenting Android Crashes With Glean</a></li></ol></li></ol></li><li class="expanded "><a href="../../user/collected-metrics/metrics.html"><strong aria-hidden="true">3.</strong> Metrics collected by the Glean SDK</a></li><li class="expanded "><a href="../../dev/index.html"><strong aria-hidden="true">4.</strong> Developing the Glean SDK</a></li><li><ol class="section"><li class="expanded "><a href="../../dev/testing.html"><strong aria-hidden="true">4.1.</strong> Testing</a></li><li class="expanded "><a href="../../dev/docs.html"><strong aria-hidden="true">4.2.</strong> Developing documentation</a></li><li class="expanded "><a href="../../dev/android/index.html"><strong aria-hidden="true">4.3.</strong> Android bindings</a></li><li><ol class="section"><li class="expanded "><a href="../../dev/android/setup-android-build-environment.html"><strong aria-hidden="true">4.3.1.</strong> Setup Build Environment</a></li></ol></li><li class="expanded "><a href="../../dev/ios/index.html"><strong aria-hidden="true">4.4.</strong> iOS bindings</a></li><li><ol class="section"><li class="expanded "><a href="../../dev/ios/setup-ios-build-environment.html"><strong aria-hidden="true">4.4.1.</strong> Setup Build Environment</a></li><li class="expanded "><a href="../../dev/ios/debug-glean-on-ios.html"><strong aria-hidden="true">4.4.2.</strong> Debugging Different Versions of Glean</a></li></ol></li><li class="expanded "><a href="../../dev/python/index.html"><strong aria-hidden="true">4.5.</strong> Python bindings</a></li><li><ol class="section"><li class="expanded "><a href="../../dev/python/setting-up-python-build-environment.html"><strong aria-hidden="true">4.5.1.</strong> Setup Build Environment</a></li></ol></li><li class="expanded "><a href="../../dev/core/index.html"><strong aria-hidden="true">4.6.</strong> Rust Component</a></li><li><ol class="section"><li class="expanded "><a href="../../dev/core/dependency-management.html"><strong aria-hidden="true">4.6.1.</strong> Dependency Management</a></li><li class="expanded "><a href="../../dev/core/new-metric-type.html"><strong aria-hidden="true">4.6.2.</strong> Adding a new metric type</a></li><li><ol class="section"><li class="expanded "><a href="../../dev/core/new-metric-type/ffi.html"><strong aria-hidden="true">4.6.2.1.</strong> FFI</a></li><li class="expanded "><a href="../../dev/core/new-metric-type/kotlin.html"><strong aria-hidden="true">4.6.2.2.</strong> Kotlin</a></li><li class="expanded "><a href="../../dev/core/new-metric-type/swift.html"><strong aria-hidden="true">4.6.2.3.</strong> Swift</a></li><li class="expanded "><a href="../../dev/core/new-metric-type/python.html"><strong aria-hidden="true">4.6.2.4.</strong> Python</a></li></ol></li></ol></li><li class="expanded "><a href="../../dev/ffi/index.html"><strong aria-hidden="true">4.7.</strong> FFI Layer</a></li><li><ol class="section"><li class="expanded "><a href="../../dev/ffi/when-to-use-what-in-the-ffi.html"><strong aria-hidden="true">4.7.1.</strong> When/How FFI</a></li></ol></li><li class="expanded "><a href="../../contributing.html"><strong aria-hidden="true">4.8.</strong> Contributing</a></li><li><ol class="section"><li class="expanded "><a href="../../code_coverage.html"><strong aria-hidden="true">4.8.1.</strong> Code coverage</a></li></ol></li><li class="expanded "><a href="../../dev/cut-a-new-release.html"><strong aria-hidden="true">4.9.</strong> Release process</a></li><li class="expanded "><a href="../../dev/core/internal/index.html"><strong aria-hidden="true">4.10.</strong> Internal implementation details</a></li><li><ol class="section"><li class="expanded "><a href="../../dev/core/internal/reserved-ping-names.html"><strong aria-hidden="true">4.10.1.</strong> Reserved ping names</a></li><li class="expanded "><a href="../../dev/core/internal/clearing.html"><strong aria-hidden="true">4.10.2.</strong> Clearing metrics when disabling/enabling Glean</a></li><li class="expanded "><a href="../../dev/core/internal/payload.html"><strong aria-hidden="true">4.10.3.</strong> Payload format</a></li><li class="expanded "><a href="../../dev/core/internal/directory-structure.html"><strong aria-hidden="true">4.10.4.</strong> Directory structure</a></li><li class="expanded "><a href="../../dev/core/internal/debug-pings.html"><strong aria-hidden="true">4.10.5.</strong> Debug Pings</a></li></ol></li><li class="expanded "><a href="../../dev/howtos/index.html"><strong aria-hidden="true">4.11.</strong> Howtos</a></li><li><ol class="section"><li class="expanded "><a href="../../dev/howtos/development-with-android-components.html"><strong aria-hidden="true">4.11.1.</strong> Development with android-components</a></li><li class="expanded "><a href="../../dev/howtos/locally-published-components-in-fenix.html"><strong aria-hidden="true">4.11.2.</strong> Locally-published components in Fenix</a></li></ol></li></ol></li><li class="expanded "><a href="../../api/index.html"><strong aria-hidden="true">5.</strong> API Documentation</a></li><li class="expanded "><a href="../../appendix/index.html"><strong aria-hidden="true">6.</strong> Appendix</a></li><li><ol class="section"><li class="expanded "><a href="../../appendix/glossary.html"><strong aria-hidden="true">6.1.</strong> Glossary</a></li><li class="expanded "><a href="../../appendix/changelog.html"><strong aria-hidden="true">6.2.</strong> Changelog</a></li><li class="expanded "><a href="../../appendix/twig.html"><strong aria-hidden="true">6.3.</strong> This Week in Glean</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar" class="menu-bar">
                    <div id="menu-bar-sticky-container">
                        <div class="left-buttons">
                            <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                                <i class="fa fa-bars"></i>
                            </button>
                            <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                                <i class="fa fa-paint-brush"></i>
                            </button>
                            <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                                <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                                <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                                <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                                <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                                <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                            </ul>
                            
                            <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                                <i class="fa fa-search"></i>
                            </button>
                            
                        </div>

                        <h1 class="menu-title">Glean - Cross-platform Telemetry library</h1>

                        <div class="right-buttons">
                            <a href="../../print.html" title="Print this book" aria-label="Print this book">
                                <i id="print-button" class="fa fa-print"></i>
                            </a>
                            
                            <a href="https://github.com/mozilla/glean" title="Git repository" aria-label="Git repository">
                                <i id="git-repository-button" class="fa fa-github"></i>
                            </a>
                            
                        </div>
                    </div>
                </div>

                
                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" name="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1><a class="header" href="#the-metrics-ping" id="the-metrics-ping">The <code>metrics</code> ping</a></h1>
<h2><a class="header" href="#description" id="description">Description</a></h2>
<p>The <code>metrics</code> ping is intended for all of the metrics that are explicitly set by the application or are included in the application's <code>metrics.yaml</code> file (except events). 
The reported data is tied to the ping's <em>measurement window</em>, which is the time between the collection of two <code>metrics</code> ping. 
Ideally, this window is expected to be about 24 hours, given that the collection is scheduled daily at 04:00. 
However, the metrics ping is only submitted while the application is actually running, so in practice, it may not meet the 04:00 target very frequently.
Data in the <a href="index.html#the-ping_info-section"><code>ping_info</code></a> section of the ping can be used to infer the length of this window and the reason that triggered the ping to be submitted.
If the application crashes, unsent recorded metrics are sent along with the next <code>metrics</code> ping.</p>
<p>Additionally, it is undesirable to mix metric recording from different versions of the application. Therefore, if a version upgrade is detected, the <code>metrics</code> ping is collected immediately before further metrics from the new version are recorded.</p>
<blockquote>
<p><strong>Note:</strong> As the <code>metrics</code> ping was specifically designed for mobile operating systems, it is not sent when using the Glean Python bindings.</p>
</blockquote>
<h2><a class="header" href="#scheduling" id="scheduling">Scheduling</a></h2>
<p>The desired behavior is to collect the ping at the first available opportunity after 04:00 local time on a new calendar day, but given constraints of the platform, it can only be submitted while the application is running. 
This breaks down into three scenarios:</p>
<ol>
<li>the application was just installed;</li>
<li>the application was just upgraded (the version of the app is different from the last time the app was run);</li>
<li>the application was just started (after a crash or a long inactivity period);</li>
<li>the application was running at 04:00.</li>
</ol>
<p>In the first case, since the application was just installed, if the due time for the current calendar day has passed, a <code>metrics</code> ping is immediately generated and scheduled for sending (reason code <code>overdue</code>). Otherwise, if the due time for the current calendar day has not passed, a ping collection is scheduled for that time (reason code <code>today</code>). </p>
<p>In the second case, if a version change is detected at startup, the metrics ping is immediately submitted so that metrics from one version are not aggregated with metrics from another version (reason code <code>upgrade</code>).</p>
<p>In the third case, if the <code>metrics</code> ping was not already collected on the current calendar day, and it is before 04:00, a collection is scheduled for 04:00 on the current calendar day (reason code <code>today</code>).
If it is after 04:00, a new collection is scheduled immediately (reason code <code>overdue</code>).
Lastly, if a ping was already collected on the current calendar day, the next one is scheduled for collecting at 04:00 on the next calendar day (reason code <code>tomorrow</code>).</p>
<p>In the fourth and last case, the application is running during a scheduled ping collection time.
The next ping is scheduled for 04:00 the next calendar day (reason code <code>reschedule</code>).</p>
<p>More <a href="#scheduling-examples">scheduling examples</a> are included below.</p>
<h2><a class="header" href="#contents" id="contents">Contents</a></h2>
<p>The <code>metrics</code> ping contains all of the metrics defined in <code>metrics.yaml</code> (except events) that don't specify a ping or where <code>default</code> is specified in their <a href="https://mozilla.github.io/glean_parser/metrics-yaml.html#send-in-pings"><code>send in pings</code></a> property.</p>
<p>Additionally, error metrics in the <code>glean.error</code> category are included in the <code>metrics</code> ping.</p>
<p>The <code>metrics</code> ping shall also include the common <a href="index.html#the-ping_info-section"><code>ping_info</code></a> and <a href="index.html#the-client_info-section">'client_info'</a> sections.</p>
<h3><a class="header" href="#querying-ping-contents" id="querying-ping-contents">Querying ping contents</a></h3>
<p>Information about query ping contents is available in <a href="https://docs.telemetry.mozilla.org/concepts/glean/accessing_glean_data.html">Accessing Glean data</a> in the Firefox data docs.</p>
<h2><a class="header" href="#scheduling-examples" id="scheduling-examples">Scheduling Examples</a></h2>
<h3><a class="header" href="#crossing-due-time-with-the-application-closed" id="crossing-due-time-with-the-application-closed">Crossing due time with the application closed</a></h3>
<ol>
<li>
<p>The application is opened on Feb 7 on 15:00, closed on 15:05.</p>
<ul>
<li>Glean records one metric A (say startup time in ms) during this measurement window MW1.</li>
</ul>
</li>
<li>
<p>The application is opened again on Feb 8 on 17:00.</p>
</li>
</ol>
<ul>
<li>
<p>Glean notes that we passed local 04:00 since MW1.</p>
</li>
<li>
<p>Glean closes MW1, with:</p>
<ul>
<li><code>start_time=Feb7/15:00</code>;</li>
<li><code>end_time=Feb8/17:00</code>.</li>
</ul>
</li>
<li>
<p>Glean records metric A again, into MW2, which has a start_time of Feb8/17:00.</p>
</li>
</ul>
<h3><a class="header" href="#crossing-due-time-and-changing-timezones" id="crossing-due-time-and-changing-timezones">Crossing due time and changing timezones</a></h3>
<ol>
<li>
<p>The application is opened on Feb 7 on 15:00 in timezone UTC, closed on 15:05.</p>
<ul>
<li>Glean records one metric A (say startup time in ms) during this measurement window MW1.</li>
</ul>
</li>
<li>
<p>The application is opened again on Feb 8 on 17:00 in timezone UTC+1.</p>
<ul>
<li>
<p>Glean notes that we passed local 04:00 UTC+1 since MW1.</p>
</li>
<li>
<p>Glean closes MW1, with:</p>
<ul>
<li><code>start_time=Feb7/15:00/UTC</code>;</li>
<li><code>end_time=Feb8/17:00/UTC+1</code>.</li>
</ul>
</li>
<li>
<p>Glean records metric A again, into MW2.</p>
</li>
</ul>
</li>
</ol>
<h3><a class="header" href="#the-application-doesnt-run-in-a-week" id="the-application-doesnt-run-in-a-week">The application doesn’t run in a week</a></h3>
<ol>
<li>
<p>The application is opened on Feb 7 on 15:00 in timezone UTC, closed on 15:05.</p>
<ul>
<li>Glean records one metric A (say startup time in ms) during this measurement window MW1.</li>
</ul>
</li>
<li>
<p>The application is opened again on Feb 16 on 17:00 in timezone UTC.</p>
<ul>
<li>
<p>Glean notes that we passed local 04:00 UTC since MW1.</p>
</li>
<li>
<p>Glean closes MW1, with:</p>
<ul>
<li><code>start_time=Feb7/15:00/UTC</code>;</li>
<li><code>end_time=Feb16/17:00/UTC</code>.</li>
</ul>
</li>
<li>
<p>Glean records metric A again, into MW2.</p>
</li>
</ul>
</li>
</ol>
<h3><a class="header" href="#the-application-doesnt-run-for-a-week-and-when-its-finally-re-opened-the-timezone-has-changed" id="the-application-doesnt-run-for-a-week-and-when-its-finally-re-opened-the-timezone-has-changed">The application doesn’t run for a week, and when it’s finally re-opened the timezone has changed</a></h3>
<ol>
<li>
<p>The application is opened on Feb 7 on 15:00 in timezone UTC, closed on 15:05.</p>
<ul>
<li>Glean records one metric A (say startup time in ms) during this measurement window MW1.</li>
</ul>
</li>
<li>
<p>The application is opened again on Feb 16 on 17:00 in timezone UTC+1.</p>
<ul>
<li>
<p>Glean notes that we passed local 04:00 UTC+1 since MW1.</p>
</li>
<li>
<p>Glean closes MW1, with:</p>
<ul>
<li><code>start_time=Feb7/15:00/UTC</code></li>
<li><code>end_time=Feb16/17:00/UTC+1</code>.</li>
</ul>
</li>
<li>
<p>Glean records metric A again, into MW2.</p>
</li>
</ul>
</li>
</ol>
<h3><a class="header" href="#the-user-changes-timezone-in-an-extreme-enough-fashion-that-they-cross-0400-twice-on-the-same-date" id="the-user-changes-timezone-in-an-extreme-enough-fashion-that-they-cross-0400-twice-on-the-same-date">The user changes timezone in an extreme enough fashion that they cross 04:00 twice on the same date</a></h3>
<ol>
<li>
<p>The application is opened on Feb 7 at 15:00 in timezone UTC+11, closed at 15:05.</p>
<ul>
<li>Glean records one metric A (say startup time in ms) during this measurement window MW1.</li>
</ul>
</li>
<li>
<p>The application is opened again on Feb 8 at 04:30 in timezone UTC+11.</p>
<ul>
<li>
<p>Glean notes that we passed local 04:00 UTC+11.</p>
</li>
<li>
<p>Glean closes MW1, with:</p>
<ul>
<li><code>start_time=Feb7/15:00/UTC+11</code>;</li>
<li><code>end_time=Feb8/04:30/UTC+11</code>.</li>
</ul>
</li>
<li>
<p>Glean records metric A again, into MW2.</p>
</li>
</ul>
</li>
<li>
<p>The user changes to timezone UTC-10 and opens the application at Feb 7 at 22:00 in timezone UTC-10</p>
<ul>
<li>Glean records metric A again, into MW2 (not MW1, which was already sent).</li>
</ul>
</li>
<li>
<p>The user opens the application at Feb 8 05:00 in timezone UTC-10</p>
<ul>
<li>Glean notes that we have not yet passed local 04:00 on Feb 9</li>
<li>Measurement window MW2 remains the current measurement window</li>
</ul>
</li>
<li>
<p>The user opens the application at Feb 9 07:00 in timezone UTC-10</p>
<ul>
<li>
<p>Glean notes that we have passed local 04:00 on Feb 9</p>
</li>
<li>
<p>Glean closes MW2 with:</p>
<ul>
<li><code>start_time=Feb8/04:30/UTC+11</code>;</li>
<li><code>end_time=Feb9/19:00/UTC-10</code>.</li>
</ul>
</li>
<li>
<p>Glean records metric A again, into MW3.</p>
</li>
</ul>
</li>
</ol>
<footer id="open-on-gh">Found a bug? <a href="https://github.com/mozilla/glean/edit/master/docs/user/pings/metrics.md">Edit this file on GitHub.</a></footer>
                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        
                            <a rel="prev" href="../../user/pings/deletion_request.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                        

                        
                            <a rel="next" href="../../user/pings/events.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                
                    <a href="../../user/pings/deletion_request.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                

                
                    <a href="../../user/pings/events.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
                
            </nav>

        </div>

        

        

        
        
        
        <script type="text/javascript">
            window.playpen_copyable = true;
        </script>
        

        

        
        <script src="../../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../searcher.js" type="text/javascript" charset="utf-8"></script>
        

        <script src="../../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        
        <script type="text/javascript" src="../../tabs.js"></script>
        

        

    </body>
</html>
