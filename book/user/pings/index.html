<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Pings - Glean - Cross-platform Telemetry library</title>
        

        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="shortcut icon" href="../../favicon.png">
        <link rel="stylesheet" href="../../css/variables.css">
        <link rel="stylesheet" href="../../css/general.css">
        <link rel="stylesheet" href="../../css/chrome.css">
        <link rel="stylesheet" href="../../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../../FontAwesome/css/font-awesome.css">
        <link href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" rel="stylesheet" type="text/css">
        <link href="https://fonts.googleapis.com/css?family=Source+Code+Pro:500" rel="stylesheet" type="text/css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../../highlight.css">
        <link rel="stylesheet" href="../../tomorrow-night.css">
        <link rel="stylesheet" href="../../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        
        <link rel="stylesheet" href="../../glean.css">
        
        <link rel="stylesheet" href="../../mermaid.css">
        

        
        <!-- MathJax -->
        <script async type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
        
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "light" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="../../index.html"><strong aria-hidden="true">1.</strong> Glean</a></li><li class="chapter-item expanded "><a href="../../user/index.html"><strong aria-hidden="true">2.</strong> Using the Glean SDK</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../user/adding-glean-to-your-project.html"><strong aria-hidden="true">2.1.</strong> Adding Glean to your project</a></li><li class="chapter-item expanded "><a href="../../user/general-api.html"><strong aria-hidden="true">2.2.</strong> The General API</a></li><li class="chapter-item expanded "><a href="../../user/adding-new-metrics.html"><strong aria-hidden="true">2.3.</strong> Adding new metrics</a></li><li class="chapter-item expanded "><a href="../../user/metric-parameters.html"><strong aria-hidden="true">2.4.</strong> Metric parameters</a></li><li class="chapter-item expanded "><a href="../../user/testing-metrics.html"><strong aria-hidden="true">2.5.</strong> Testing metrics</a></li><li class="chapter-item expanded "><a href="../../user/debugging/index.html"><strong aria-hidden="true">2.6.</strong> Debugging products using Glean</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../user/debugging/debug-ping-view.html"><strong aria-hidden="true">2.6.1.</strong> Glean Debug Ping View</a></li><li class="chapter-item expanded "><a href="../../user/debugging/android.html"><strong aria-hidden="true">2.6.2.</strong> Android</a></li><li class="chapter-item expanded "><a href="../../user/debugging/ios.html"><strong aria-hidden="true">2.6.3.</strong> iOS</a></li><li class="chapter-item expanded "><a href="../../user/debugging/python.html"><strong aria-hidden="true">2.6.4.</strong> Python</a></li></ol></li><li class="chapter-item expanded "><a href="../../user/error-reporting.html"><strong aria-hidden="true">2.7.</strong> Error reporting</a></li><li class="chapter-item expanded "><a href="../../user/experiments-api.html"><strong aria-hidden="true">2.8.</strong> Using the experiments API</a></li><li class="chapter-item expanded "><a href="../../user/metrics/index.html"><strong aria-hidden="true">2.9.</strong> Metric types</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../user/metrics/boolean.html"><strong aria-hidden="true">2.9.1.</strong> Boolean</a></li><li class="chapter-item expanded "><a href="../../user/metrics/labeled_booleans.html"><strong aria-hidden="true">2.9.2.</strong> Labeled Booleans</a></li><li class="chapter-item expanded "><a href="../../user/metrics/counter.html"><strong aria-hidden="true">2.9.3.</strong> Counter</a></li><li class="chapter-item expanded "><a href="../../user/metrics/labeled_counters.html"><strong aria-hidden="true">2.9.4.</strong> Labeled Counters</a></li><li class="chapter-item expanded "><a href="../../user/metrics/jwe.html"><strong aria-hidden="true">2.9.5.</strong> JWE</a></li><li class="chapter-item expanded "><a href="../../user/metrics/string.html"><strong aria-hidden="true">2.9.6.</strong> String</a></li><li class="chapter-item expanded "><a href="../../user/metrics/labeled_strings.html"><strong aria-hidden="true">2.9.7.</strong> Labeled Strings</a></li><li class="chapter-item expanded "><a href="../../user/metrics/string_list.html"><strong aria-hidden="true">2.9.8.</strong> String List</a></li><li class="chapter-item expanded "><a href="../../user/metrics/timespan.html"><strong aria-hidden="true">2.9.9.</strong> Timespan</a></li><li class="chapter-item expanded "><a href="../../user/metrics/timing_distribution.html"><strong aria-hidden="true">2.9.10.</strong> Timing Distribution</a></li><li class="chapter-item expanded "><a href="../../user/metrics/memory_distribution.html"><strong aria-hidden="true">2.9.11.</strong> Memory Distribution</a></li><li class="chapter-item expanded "><a href="../../user/metrics/uuid.html"><strong aria-hidden="true">2.9.12.</strong> UUID</a></li><li class="chapter-item expanded "><a href="../../user/metrics/datetime.html"><strong aria-hidden="true">2.9.13.</strong> Datetime</a></li><li class="chapter-item expanded "><a href="../../user/metrics/event.html"><strong aria-hidden="true">2.9.14.</strong> Event</a></li><li class="chapter-item expanded "><a href="../../user/metrics/custom_distribution.html"><strong aria-hidden="true">2.9.15.</strong> Custom Distribution</a></li><li class="chapter-item expanded "><a href="../../user/metrics/quantity.html"><strong aria-hidden="true">2.9.16.</strong> Quantity</a></li></ol></li><li class="chapter-item expanded "><a href="../../user/pings/index.html" class="active"><strong aria-hidden="true">2.10.</strong> Pings</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../user/pings/ping-schedules-and-timings.html"><strong aria-hidden="true">2.10.1.</strong> Ping schedules and timings overview</a></li><li class="chapter-item expanded "><a href="../../user/pings/baseline.html"><strong aria-hidden="true">2.10.2.</strong> Baseline Ping</a></li><li class="chapter-item expanded "><a href="../../user/pings/deletion_request.html"><strong aria-hidden="true">2.10.3.</strong> Deletion Request Ping</a></li><li class="chapter-item expanded "><a href="../../user/pings/metrics.html"><strong aria-hidden="true">2.10.4.</strong> Metrics Ping</a></li><li class="chapter-item expanded "><a href="../../user/pings/events.html"><strong aria-hidden="true">2.10.5.</strong> Events Ping</a></li><li class="chapter-item expanded "><a href="../../user/pings/custom.html"><strong aria-hidden="true">2.10.6.</strong> Custom Pings</a></li><li class="chapter-item expanded "><a href="../../user/pings/testing-custom-pings.html"><strong aria-hidden="true">2.10.7.</strong> Testing custom pings</a></li></ol></li><li class="chapter-item expanded "><a href="../../user/android/index.html"><strong aria-hidden="true">2.11.</strong> Android-specific information</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../user/android/android-build-configuration-options.html"><strong aria-hidden="true">2.11.1.</strong> Android build configuration options</a></li><li class="chapter-item expanded "><a href="../../user/android/android-offline-builds.html"><strong aria-hidden="true">2.11.2.</strong> Android offline builds</a></li></ol></li><li class="chapter-item expanded "><a href="../../user/focused-use-cases.html"><strong aria-hidden="true">2.12.</strong> Focused Use Cases</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../user/instrument-android-crashes-example.html"><strong aria-hidden="true">2.12.1.</strong> Instrumenting Android crashes with the Glean SDK</a></li></ol></li></ol></li><li class="chapter-item expanded "><a href="../../user/collected-metrics/metrics.html"><strong aria-hidden="true">3.</strong> Metrics collected by the Glean SDK</a></li><li class="chapter-item expanded "><a href="../../dev/index.html"><strong aria-hidden="true">4.</strong> Developing the Glean SDK</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../dev/testing.html"><strong aria-hidden="true">4.1.</strong> Testing</a></li><li class="chapter-item expanded "><a href="../../dev/ci.html"><strong aria-hidden="true">4.2.</strong> Continuous Integration</a></li><li class="chapter-item expanded "><a href="../../dev/cut-a-new-release.html"><strong aria-hidden="true">4.3.</strong> Release process</a></li><li class="chapter-item expanded "><a href="../../contributing.html"><strong aria-hidden="true">4.4.</strong> Contributing</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../code_coverage.html"><strong aria-hidden="true">4.4.1.</strong> Code coverage</a></li></ol></li><li class="chapter-item expanded "><a href="../../dev/docs.html"><strong aria-hidden="true">4.5.</strong> Developing documentation</a></li><li class="chapter-item expanded "><a href="../../dev/upgrading-glean-parser.html"><strong aria-hidden="true">4.6.</strong> Upgrading glean_parser</a></li><li class="chapter-item expanded "><a href="../../dev/android/index.html"><strong aria-hidden="true">4.7.</strong> Android bindings</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../dev/android/setup-android-build-environment.html"><strong aria-hidden="true">4.7.1.</strong> Setup Build Environment</a></li><li class="chapter-item expanded "><a href="../../dev/android/sdk-ndk-versions.html"><strong aria-hidden="true">4.7.2.</strong> Android SDK/NDK versions</a></li><li class="chapter-item expanded "><a href="../../dev/android/development-with-android-components.html"><strong aria-hidden="true">4.7.3.</strong> Development with android-components</a></li><li class="chapter-item expanded "><a href="../../dev/android/locally-published-components-in-fenix.html"><strong aria-hidden="true">4.7.4.</strong> Locally-published components in Fenix</a></li></ol></li><li class="chapter-item expanded "><a href="../../dev/ios/index.html"><strong aria-hidden="true">4.8.</strong> iOS bindings</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../dev/ios/setup-ios-build-environment.html"><strong aria-hidden="true">4.8.1.</strong> Setup Build Environment</a></li><li class="chapter-item expanded "><a href="../../dev/ios/debug-glean-on-ios.html"><strong aria-hidden="true">4.8.2.</strong> Debugging Different Versions of Glean</a></li></ol></li><li class="chapter-item expanded "><a href="../../dev/python/index.html"><strong aria-hidden="true">4.9.</strong> Python bindings</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../dev/python/setting-up-python-build-environment.html"><strong aria-hidden="true">4.9.1.</strong> Setup Build Environment</a></li></ol></li><li class="chapter-item expanded "><a href="../../dev/core/index.html"><strong aria-hidden="true">4.10.</strong> Rust Component</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../dev/core/documentation-guidelines.html"><strong aria-hidden="true">4.10.1.</strong> Documentation guidelines</a></li><li class="chapter-item expanded "><a href="../../dev/core/dependency-management.html"><strong aria-hidden="true">4.10.2.</strong> Dependency Management</a></li><li class="chapter-item expanded "><a href="../../dev/core/new-metric-type.html"><strong aria-hidden="true">4.10.3.</strong> Adding a new metric type</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../dev/core/new-metric-type/ffi.html"><strong aria-hidden="true">4.10.3.1.</strong> FFI</a></li><li class="chapter-item expanded "><a href="../../dev/core/new-metric-type/kotlin.html"><strong aria-hidden="true">4.10.3.2.</strong> Kotlin</a></li><li class="chapter-item expanded "><a href="../../dev/core/new-metric-type/swift.html"><strong aria-hidden="true">4.10.3.3.</strong> Swift</a></li><li class="chapter-item expanded "><a href="../../dev/core/new-metric-type/python.html"><strong aria-hidden="true">4.10.3.4.</strong> Python</a></li></ol></li></ol></li><li class="chapter-item expanded "><a href="../../dev/ffi/index.html"><strong aria-hidden="true">4.11.</strong> FFI Layer</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../dev/ffi/when-to-use-what-in-the-ffi.html"><strong aria-hidden="true">4.11.1.</strong> When/How FFI</a></li></ol></li><li class="chapter-item expanded "><a href="../../dev/core/internal/index.html"><strong aria-hidden="true">4.12.</strong> Internal implementation details</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../dev/core/internal/reserved-ping-names.html"><strong aria-hidden="true">4.12.1.</strong> Reserved ping names</a></li><li class="chapter-item expanded "><a href="../../dev/core/internal/clearing.html"><strong aria-hidden="true">4.12.2.</strong> Clearing metrics when disabling/enabling Glean</a></li><li class="chapter-item expanded "><a href="../../dev/core/internal/payload.html"><strong aria-hidden="true">4.12.3.</strong> Payload format</a></li><li class="chapter-item expanded "><a href="../../dev/core/internal/directory-structure.html"><strong aria-hidden="true">4.12.4.</strong> Directory structure</a></li><li class="chapter-item expanded "><a href="../../dev/core/internal/debug-pings.html"><strong aria-hidden="true">4.12.5.</strong> Debug Pings</a></li><li class="chapter-item expanded "><a href="../../dev/core/internal/upload.html"><strong aria-hidden="true">4.12.6.</strong> Upload mechanism</a></li><li class="chapter-item expanded "><a href="../../dev/core/internal/implementations.html"><strong aria-hidden="true">4.12.7.</strong> Implementations</a></li></ol></li></ol></li><li class="chapter-item expanded "><a href="../../api/index.html"><strong aria-hidden="true">5.</strong> API Documentation</a></li><li class="chapter-item expanded "><a href="../../appendix/index.html"><strong aria-hidden="true">6.</strong> Appendix</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../appendix/glossary.html"><strong aria-hidden="true">6.1.</strong> Glossary</a></li><li class="chapter-item expanded "><a href="../../appendix/changelog.html"><strong aria-hidden="true">6.2.</strong> Changelog</a></li><li class="chapter-item expanded "><a href="../../appendix/twig.html"><strong aria-hidden="true">6.3.</strong> This Week in Glean</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                        
                    </div>

                    <h1 class="menu-title">Glean - Cross-platform Telemetry library</h1>

                    <div class="right-buttons">
                        <a href="../../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        
                        <a href="https://github.com/mozilla/glean" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                        
                    </div>
                </div>

                
                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" name="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1><a class="header" href="#glean-pings" id="glean-pings">Glean Pings</a></h1>
<p>Every Glean ping is in JSON format and contains one or more of the <a href="#ping-sections">common sections</a> with shared information data.</p>
<p>If data collection is enabled, the Glean SDK provides a set of built-in pings that are assembled out of the box without any developer intervention.  The following is a list of these built-in pings:</p>
<ul>
<li><a href="baseline.html"><code>baseline</code> ping</a>: A small ping sent every time the application goes to foreground and background. Going to foreground also includes when the application starts.</li>
<li><a href="metrics.html"><code>metrics</code> ping</a>: The default ping for metrics. Sent approximately daily.</li>
<li><a href="events.html"><code>events</code> ping</a>: The default ping for events. Sent every time the application goes to background or a certain number of events is reached.</li>
<li><a href="deletion_request.html"><code>deletion-request</code> ping</a>: Sent when the user disables telemetry in order to request a deletion of their data.</li>
</ul>
<p>Applications can also define and send their own <a href="custom.html">custom pings</a> when the schedules of these pings is not suitable.</p>
<p>There is also a <a href="ping-schedules-and-timings.html">high-level overview</a> of how the <code>metrics</code> and <code>baseline</code> pings relate and the timings they record.</p>
<h2><a class="header" href="#ping-sections" id="ping-sections">Ping sections</a></h2>
<p>There are two standard metadata sections that are added to most pings, in addition to their core metrics and events content (which are described in <a href="../adding-new-metrics.html">Adding new metrics</a>).</p>
<ul>
<li>
<p>The <a href="#the-ping_info-section"><code>ping_info</code> section</a> contains core metadata that is included in <strong>every</strong> ping.</p>
</li>
<li>
<p>The <a href="#the-client_info-section"><code>client_info</code> section</a> contains information that identifies the client.
It is included in most pings (including all built-in pings), but may be excluded from pings where we don't want to connect client information with the other metrics in the ping.</p>
</li>
</ul>
<h3><a class="header" href="#the-ping_info-section" id="the-ping_info-section">The <code>ping_info</code> section</a></h3>
<p>The following fields are included in the <code>ping_info</code> section, for every ping.
Optional fields are marked accordingly.</p>
<table><thead><tr><th>Field name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>seq</code></td><td>Counter</td><td>A running counter of the number of times pings of this type have been sent</td></tr>
<tr><td><code>experiments</code></td><td>Object</td><td><em>Optional</em>. A dictionary of <a href="#the-experiments-object">active experiments</a></td></tr>
<tr><td><code>start_time</code></td><td>Datetime</td><td>The time of the start of collection of the data in the ping, in local time and with minute precision, including timezone information.</td></tr>
<tr><td><code>end_time</code></td><td>Datetime</td><td>The time of the end of collection of the data in the ping, in local time and with minute precision, including timezone information. This is also the time this ping was generated and is likely well before ping transmission time.</td></tr>
<tr><td><code>reason</code></td><td>String</td><td><em>Optional</em>. The reason the ping was submitted. The specific set of values and their meanings are defined for each metric type in the <code>reasons</code> field in the <code>pings.yaml</code> file.</td></tr>
</tbody></table>
<p>All the metrics surviving application restarts (e.g. <code>seq</code>, ...) are removed once the application using the Glean SDK is uninstalled.</p>
<h3><a class="header" href="#the-client_info-section" id="the-client_info-section">The <code>client_info</code> section</a></h3>
<p>The following fields are included in the <code>client_info</code> section.
Optional fields are marked accordingly.</p>
<table><thead><tr><th>Field name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>app_build</code></td><td>String</td><td>The build identifier generated by the CI system (e.g. &quot;1234/A&quot;). For language bindings that provide automatic detection for this value, (e.g. Android/Kotlin), in the unlikely event that the build identifier can not be retrieved from the OS, it is set to <code>inaccessible</code>. For other language bindings, if the value was not provided through configuration, this metric gets set to <code>Unknown</code>.</td></tr>
<tr><td><code>app_channel</code></td><td>String</td><td><em>Optional</em> The product-provided release channel (e.g. &quot;beta&quot;)</td></tr>
<tr><td><code>app_display_version</code></td><td>String</td><td>The user-visible version string (e.g. &quot;1.0.3&quot;). The meaning of the string (e.g. whether semver or a git hash) is application-specific. In the unlikely event this value can not be obtained from the OS, it is set to &quot;inaccessible&quot;. If it is accessible, but not set by the application, it is set to &quot;Unknown&quot;.</td></tr>
<tr><td><code>architecture</code></td><td>String</td><td>The architecture of the device (e.g. &quot;arm&quot;, &quot;x86&quot;)</td></tr>
<tr><td><code>client_id</code></td><td>UUID</td><td><em>Optional</em> A UUID identifying a profile and allowing user-oriented correlation of data</td></tr>
<tr><td><code>device_manufacturer</code></td><td>String</td><td><em>Optional</em> The manufacturer of the device</td></tr>
<tr><td><code>device_model</code></td><td>String</td><td><em>Optional</em> The model name of the device. On Android, this is <a href="https://developer.android.com/reference/android/os/Build.html#MODEL"><code>Build.MODEL</code></a>, the user-visible name of the device.</td></tr>
<tr><td><code>first_run_date</code></td><td>Datetime</td><td>The date of the first run of the application, in local time and with day precision, including timezone information.</td></tr>
<tr><td><code>os</code></td><td>String</td><td>The name of the operating system (e.g. &quot;linux&quot;, &quot;Android&quot;, &quot;ios&quot;)</td></tr>
<tr><td><code>os_version</code></td><td>String</td><td>The user-visible version of the operating system (e.g. &quot;1.2.3&quot;)</td></tr>
<tr><td><code>android_sdk_version</code></td><td>String</td><td><em>Optional</em>. The Android specific SDK version of the software running on this hardware device (e.g. &quot;23&quot;)</td></tr>
<tr><td><code>telemetry_sdk_build</code></td><td>String</td><td>The version of the Glean SDK</td></tr>
<tr><td><code>locale</code></td><td>String</td><td><em>Optional</em>. The locale of the application during initialization (e.g. &quot;es-ES&quot;). If the locale can't be determined on the system, the value is &quot;und&quot;, to indicate &quot;undetermined&quot;.</td></tr>
</tbody></table>
<p>All the metrics surviving application restarts (e.g. <code>client_id</code>, ...) are removed once the application using the Glean SDK is uninstalled.</p>
<h3><a class="header" href="#the-experiments-object" id="the-experiments-object">The <code>experiments</code> object</a></h3>
<p>This object (included in the <a href="#the-ping_info-section"><code>ping_info</code> section</a>) contains experiments keyed by the experiment <code>id</code>. Each listed experiment contains the <code>branch</code> the client is enrolled in and may contain a string to string map with additional data in the <code>extra</code> key. Both the <code>id</code> and <code>branch</code> are truncated to 30 characters.
See <a href="../experiments-api.html">Using the Experiments API</a> on how to record experiments data.</p>
<pre><code class="language-json">{
  &quot;&lt;id&gt;&quot;: {
    &quot;branch&quot;: &quot;branch-id&quot;,
    &quot;extra&quot;: {
      &quot;some-key&quot;: &quot;a-value&quot;
    }
  }
}
</code></pre>
<h2><a class="header" href="#ping-submission" id="ping-submission">Ping submission</a></h2>
<p>The pings that the Glean SDK generates are submitted to the Mozilla servers at specific paths, in order to provide additional metadata without the need to unpack the ping payload.</p>
<p>A typical submission URL looks like</p>
<p><code>&quot;&lt;server-address&gt;/submit/&lt;application-id&gt;/&lt;doc-type&gt;/&lt;glean-schema-version&gt;/&lt;document-id&gt;&quot;</code></p>
<p>where:</p>
<ul>
<li><code>&lt;server-address&gt;</code>: the address of the server that receives the pings;</li>
<li><code>&lt;application-id&gt;</code>: a unique application id, automatically detected by the Glean SDK; this is the value returned by <a href="http://developer.android.com/reference/android/content/Context.html#getPackageName()"><code>Context.getPackageName()</code></a>;</li>
<li><code>&lt;doc-type&gt;</code>: the name of the ping; this can be one of the pings available out of the box with the Glean SDK, or a custom ping;</li>
<li><code>&lt;glean-schema-version&gt;</code>: the version of the Glean ping schema;</li>
<li><code>&lt;document-id&gt;</code>: a unique identifier for this ping.</li>
</ul>
<h3><a class="header" href="#limitations" id="limitations">Limitations</a></h3>
<p>To keep resource usage in check, the Glean SDK enforces some limitations on ping uploading and ping storage.</p>
<ul>
<li><strong>Rate limiting</strong>: only up to 10 ping submissions every 60 seconds are allowed. There are no exposed methods to change these rate limiting defaults yet, follow <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1647630">Bug 1647630</a> for updates.</li>
<li><strong>Request body size limiting</strong>: the body of a ping request may have up to 1MB. Pings that exceed this size are discarded and don't get uploaded. Size and number of discarded pings are recorded on the internal Glean metric <a href="../collected-metrics/metrics.html#metrics-1"><code>glean.upload.discarded_exceeding_pings_size</code></a>.</li>
<li><strong>Storage quota</strong>: Pending pings are stored on disk. The storage directory is scanned every time Glean is initialized and upon scanning Glean checks its size. If this directory exceeds a size of 10MB, pings are deleted to get the directory back to an accepted size. Pings are deleted oldest first, until the directory size is below the quota.
The number of deleted pings due to exceeding storage quota is recorded on the metric <a href="../collected-metrics/metrics.html#metrics-1"><code>glean.upload.deleted_pings_after_quota_hit</code></a> and the size of the pending pings directory is recorded (regardless on whether quota has been reached) on the metric <a href="../collected-metrics/metrics.html#metrics-1"><code>glean.upload.pending_pings_directory_size</code></a>
<strong>Note</strong> Deletion request pings are stored in a different directory, are not subject to this limitation and never get deleted.</li>
</ul>
<h3><a class="header" href="#submitted-headers" id="submitted-headers">Submitted headers</a></h3>
<p>A pre-defined set of headers is additionally sent along with the submitted ping:</p>
<table><thead><tr><th>Header</th><th>Value</th><th>Description</th></tr></thead><tbody>
<tr><td><code>Content-Type</code></td><td><code>application/json; charset=utf-8</code></td><td>Describes the data sent to the server</td></tr>
<tr><td><code>User-Agent</code></td><td>Defaults to e.g. <code>Glean/0.40.0 (Kotlin on Android)</code>, where <code>0.40.0</code> is the Glean SDK version number and <code>Kotlin on Android</code> is the name of the language used by the binding that sent the request plus the name of the platform it is running on.</td><td>Describes the application sending the ping using the Glean SDK</td></tr>
<tr><td><code>Date</code></td><td>e.g. <code>Mon, 23 Jan 2019 10:10:10 GMT+00:00</code></td><td>Submission date/time in GMT/UTC+0 offset</td></tr>
<tr><td><code>X-Client-Type</code></td><td><code>Glean</code></td><td>Custom header to support handling of Glean pings in the legacy pipeline</td></tr>
<tr><td><code>X-Client-Version</code></td><td>e.g. <code>0.40.0</code></td><td>The Glean SDK version, sent as a custom header to support handling of Glean pings in the legacy pipeline</td></tr>
<tr><td><code>X-Debug-ID</code></td><td><em>Optional</em>, e.g. <code>test-tag</code></td><td>Debug header attached to Glean pings when using the <a href="../../user/debugging/index.html">debug tools</a></td></tr>
<tr><td><code>X-Source-Tags</code></td><td><em>Optional</em>, e.g. <code>automation, perf</code></td><td>A list of tags to associate with the ping, useful for clustering pings at analysis time, for example to tell data generated from CI from other data.</td></tr>
</tbody></table>
<h2><a class="header" href="#defining-foreground-and-background-state" id="defining-foreground-and-background-state">Defining foreground and background state</a></h2>
<p>These docs refer to application 'foreground' and 'background' state in several places.</p>
<div class="tabs">
<div class="tabbar"></div>
<div class="tabcontents">
<div data-lang="Kotlin" class="tab">
<h4><a class="header" href="#foreground" id="foreground">Foreground</a></h4>
<p>For Android, this specifically means the activity becomes visible to the user, it has entered the <code>Started</code> state, and the system invokes the <a href="https://developer.android.com/reference/android/app/Activity.html#onStart()"><code>onStart()</code></a> callback.</p>
<h3><a class="header" href="#background" id="background">Background</a></h3>
<p>This specifically means when the activity is no longer visible to the user, it has entered the <code>Stopped</code> state, and the system invokes the <a href="https://developer.android.com/reference/android/app/Activity.html#onStop()"><code>onStop()</code></a> callback.</p>
<p>This may occur, if the user uses <code>Overview</code> button to change to another app, the user presses the <code>Back</code> button and
navigates to a previous application or the home screen, or if the user presses the <code>Home</code> button to return to the
home screen.  This can also occur if the user navigates away from the application through some notification or
other means.</p>
<p>The system may also call <code>onStop()</code> when the activity has finished running, and is about to be terminated.</p>
</div>
<div data-lang="Swift" class="tab">
<h3><a class="header" href="#foreground-1" id="foreground-1">Foreground</a></h3>
<p>For iOS, the Glean SDK attaches to the <a href="https://developer.apple.com/documentation/uikit/uiapplication/1622944-willenterforegroundnotification"><code>willEnterForegroundNotification</code></a>.
This notification is posted by the OS shortly before an app leaves the background state on its way to becoming the active app.</p>
<h3><a class="header" href="#background-1" id="background-1">Background</a></h3>
<p>For iOS, this specifically means when the app is no longer visible to the user, or when the <code>UIApplicationDelegate</code>
receives the <a href="https://developer.apple.com/documentation/uikit/uiapplicationdelegate/1622997-applicationdidenterbackground"><code>applicationDidEnterBackground</code></a> event.</p>
<p>This may occur if the user opens the task switcher to change to another app, or if the user presses the <code>Home</code> button
to show the home screen.  This can also occur if the user navigates away from the app through a notification or other
means.</p>
<blockquote>
<p><strong>Note:</strong> Glean does not currently support <a href="https://developer.apple.com/documentation/uikit/app_and_environment/managing_your_app_s_life_cycle">Scene based lifecycle events</a> that were introduced in iOS 13.</p>
</blockquote>
</div>
</div>
</div>
<footer id="open-on-gh">Found a bug? <a href="https://github.com/mozilla/glean/edit/main/docs/user/pings/index.md">Edit this file on GitHub.</a></footer>
                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        
                            <a rel="prev" href="../../user/metrics/quantity.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                        

                        
                            <a rel="next" href="../../user/pings/ping-schedules-and-timings.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                
                    <a rel="prev" href="../../user/metrics/quantity.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                

                
                    <a rel="next" href="../../user/pings/ping-schedules-and-timings.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
                
            </nav>

        </div>

        

        

        
        
        
        <script type="text/javascript">
            window.playpen_copyable = true;
        </script>
        

        

        
        <script src="../../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../searcher.js" type="text/javascript" charset="utf-8"></script>
        

        <script src="../../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        
        <script type="text/javascript" src="../../tabs.js"></script>
        
        <script type="text/javascript" src="../../mermaid.min.js"></script>
        
        <script type="text/javascript" src="../../mermaid-init.js"></script>
        
        <script type="text/javascript" src="../../chart.min.js"></script>
        
        <script type="text/javascript" src="../../chart-distributions.js"></script>
        
        <script type="text/javascript" src="../../chart-distributions-ui.js"></script>
        

        

    </body>
</html>
