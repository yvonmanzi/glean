<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="API documentation for the Rust `Glean` struct in crate `glean_core`."><meta name="keywords" content="rust, rustlang, rust-lang, Glean"><title>glean_core::Glean - Rust</title><link rel="stylesheet" type="text/css" href="../normalize.css"><link rel="stylesheet" type="text/css" href="../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" type="text/css" href="../dark.css"><link rel="stylesheet" type="text/css" href="../light.css" id="themeStyle"><script src="../storage.js"></script><noscript><link rel="stylesheet" href="../noscript.css"></noscript><link rel="shortcut icon" href="../favicon.ico"><style type="text/css">#crate-search{background-image:url("../down-arrow.svg");}</style></head><body class="rustdoc struct"><!--[if lte IE 8]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="sidebar"><div class="sidebar-menu">&#9776;</div><a href='../glean_core/index.html'><div class='logo-container'><img src='../rust-logo.png' alt='logo'></div></a><p class='location'>Struct Glean</p><div class="sidebar-elems"><div class="block items"><a class="sidebar-title" href="#methods">Methods</a><div class="sidebar-links"><a href="#method.clear_application_lifetime_metrics">clear_application_lifetime_metrics</a><a href="#method.destroy_db">destroy_db</a><a href="#method.event_storage">event_storage</a><a href="#method.get_application_id">get_application_id</a><a href="#method.get_data_path">get_data_path</a><a href="#method.get_max_events">get_max_events</a><a href="#method.get_ping_by_name">get_ping_by_name</a><a href="#method.get_upload_task">get_upload_task</a><a href="#method.is_dirty_flag_set">is_dirty_flag_set</a><a href="#method.is_first_run">is_first_run</a><a href="#method.is_upload_enabled">is_upload_enabled</a><a href="#method.new">new</a><a href="#method.on_ready_to_submit_pings">on_ready_to_submit_pings</a><a href="#method.persist_ping_lifetime_data">persist_ping_lifetime_data</a><a href="#method.process_ping_upload_response">process_ping_upload_response</a><a href="#method.register_ping_type">register_ping_type</a><a href="#method.set_dirty_flag">set_dirty_flag</a><a href="#method.set_experiment_active">set_experiment_active</a><a href="#method.set_experiment_inactive">set_experiment_inactive</a><a href="#method.set_upload_enabled">set_upload_enabled</a><a href="#method.snapshot">snapshot</a><a href="#method.storage">storage</a><a href="#method.submit_ping">submit_ping</a><a href="#method.submit_ping_by_name">submit_ping_by_name</a><a href="#method.test_clear_all_stores">test_clear_all_stores</a><a href="#method.test_get_experiment_data_as_json">test_get_experiment_data_as_json</a><a href="#method.test_is_experiment_active">test_is_experiment_active</a></div><a class="sidebar-title" href="#implementations">Trait Implementations</a><div class="sidebar-links"><a href="#impl-Debug">Debug</a></div><a class="sidebar-title" href="#synthetic-implementations">Auto Trait Implementations</a><div class="sidebar-links"><a href="#impl-RefUnwindSafe">RefUnwindSafe</a><a href="#impl-Send">Send</a><a href="#impl-Sync">Sync</a><a href="#impl-Unpin">Unpin</a><a href="#impl-UnwindSafe">UnwindSafe</a></div><a class="sidebar-title" href="#blanket-implementations">Blanket Implementations</a><div class="sidebar-links"><a href="#impl-Any">Any</a><a href="#impl-Borrow%3CT%3E">Borrow&lt;T&gt;</a><a href="#impl-BorrowMut%3CT%3E">BorrowMut&lt;T&gt;</a><a href="#impl-From%3CT%3E">From&lt;T&gt;</a><a href="#impl-Into%3CU%3E">Into&lt;U&gt;</a><a href="#impl-TryFrom%3CU%3E">TryFrom&lt;U&gt;</a><a href="#impl-TryInto%3CU%3E">TryInto&lt;U&gt;</a><a href="#impl-VZip%3CV%3E">VZip&lt;V&gt;</a></div></div><p class='location'><a href='index.html'>glean_core</a></p><script>window.sidebarCurrent = {name: 'Glean', ty: 'struct', relpath: ''};</script><script defer src="sidebar-items.js"></script></div></nav><div class="theme-picker"><button id="theme-picker" aria-label="Pick another theme!"><img src="../brush.svg" width="18" alt="Pick another theme!"></button><div id="theme-choices"></div></div><script src="../theme.js"></script><nav class="sub"><form class="search-form"><div class="search-container"><div><select id="crate-search"><option value="All crates">All crates</option></select><input class="search-input" name="search" disabled autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"></div><a id="settings-menu" href="../settings.html"><img src="../wheel.svg" width="18" alt="Change settings"></a></div></form></nav><section id="main" class="content"><h1 class='fqn'><span class='out-of-band'><span id='render-detail'><a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class='inner'>&#x2212;</span>]</a></span><a class='srclink' href='../src/glean_core/lib.rs.html#163-176' title='goto source code'>[src]</a></span><span class='in-band'>Struct <a href='index.html'>glean_core</a>::<wbr><a class="struct" href=''>Glean</a></span></h1><div class="docblock type-decl hidden-by-usual-hider"><pre class='rust struct'>pub struct Glean { /* fields omitted */ }</pre></div><div class='docblock'><p>The object holding meta information about a Glean instance.</p>
<h2 id="example" class="section-header"><a href="#example">Example</a></h2>
<p>Create a new Glean instance, register a ping, record a simple counter and then send the final
ping.</p>

<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="kw">let</span> <span class="ident">cfg</span> <span class="op">=</span> <span class="ident">Configuration</span> {
    <span class="ident">data_path</span>: <span class="string">&quot;/tmp/glean&quot;</span>.<span class="ident">into</span>(),
    <span class="ident">application_id</span>: <span class="string">&quot;glean.sample.app&quot;</span>.<span class="ident">into</span>(),
    <span class="ident">upload_enabled</span>: <span class="bool-val">true</span>,
    <span class="ident">max_events</span>: <span class="prelude-val">None</span>,
    <span class="ident">delay_ping_lifetime_io</span>: <span class="bool-val">false</span>,
};
<span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">glean</span> <span class="op">=</span> <span class="ident">Glean</span>::<span class="ident">new</span>(<span class="ident">cfg</span>).<span class="ident">unwrap</span>();
<span class="kw">let</span> <span class="ident">ping</span> <span class="op">=</span> <span class="ident">PingType</span>::<span class="ident">new</span>(<span class="string">&quot;sample&quot;</span>, <span class="bool-val">true</span>, <span class="bool-val">false</span>, <span class="macro">vec</span><span class="macro">!</span>[]);
<span class="ident">glean</span>.<span class="ident">register_ping_type</span>(<span class="kw-2">&amp;</span><span class="ident">ping</span>);

<span class="kw">let</span> <span class="ident">call_counter</span>: <span class="ident">CounterMetric</span> <span class="op">=</span> <span class="ident">CounterMetric</span>::<span class="ident">new</span>(<span class="ident">CommonMetricData</span> {
    <span class="ident">name</span>: <span class="string">&quot;calls&quot;</span>.<span class="ident">into</span>(),
    <span class="ident">category</span>: <span class="string">&quot;local&quot;</span>.<span class="ident">into</span>(),
    <span class="ident">send_in_pings</span>: <span class="macro">vec</span><span class="macro">!</span>[<span class="string">&quot;sample&quot;</span>.<span class="ident">into</span>()],
    ..<span class="ident">Default</span>::<span class="ident">default</span>()
});

<span class="ident">call_counter</span>.<span class="ident">add</span>(<span class="kw-2">&amp;</span><span class="ident">glean</span>, <span class="number">1</span>);

<span class="ident">glean</span>.<span class="ident">submit_ping</span>(<span class="kw-2">&amp;</span><span class="ident">ping</span>, <span class="prelude-val">None</span>).<span class="ident">unwrap</span>();</pre></div>
<h2 id="note" class="section-header"><a href="#note">Note</a></h2>
<p>In specific language bindings, this is usually wrapped in a singleton and all metric recording goes to a single instance of this object.
In the Rust core, it is possible to create multiple instances, which is used in testing.</p>
</div><h2 id='methods' class='small-section-header'>Methods<a href='#methods' class='anchor'></a></h2><h3 id='impl' class='impl'><code class='in-band'>impl <a class="struct" href="../glean_core/struct.Glean.html" title="struct glean_core::Glean">Glean</a></code><a href='#impl' class='anchor'></a><a class='srclink' href='../src/glean_core/lib.rs.html#178-773' title='goto source code'>[src]</a></h3><div class='impl-items'><h4 id='method.new' class="method"><code id='new.v'>pub fn <a href='#method.new' class='fnname'>new</a>(cfg: <a class="struct" href="../glean_core/struct.Configuration.html" title="struct glean_core::Configuration">Configuration</a>) -&gt; <a class="type" href="../glean_core/type.Result.html" title="type glean_core::Result">Result</a>&lt;Self&gt;</code><a class='srclink' href='../src/glean_core/lib.rs.html#183-240' title='goto source code'>[src]</a></h4><div class='docblock'><p>Create and initialize a new Glean object.</p>
<p>This will create the necessary directories and files in <code>data_path</code>.
This will also initialize the core metrics.</p>
</div><h4 id='method.destroy_db' class="method"><code id='destroy_db.v'>pub fn <a href='#method.destroy_db' class='fnname'>destroy_db</a>(&amp;mut self)</code><a class='srclink' href='../src/glean_core/lib.rs.html#262-264' title='goto source code'>[src]</a></h4><div class='docblock'><p>Destroy the database.
After this Glean needs to be reinitialized.</p>
</div><h4 id='method.on_ready_to_submit_pings' class="method"><code id='on_ready_to_submit_pings.v'>pub fn <a href='#method.on_ready_to_submit_pings' class='fnname'>on_ready_to_submit_pings</a>(&amp;self) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.bool.html">bool</a></code><a class='srclink' href='../src/glean_core/lib.rs.html#304-306' title='goto source code'>[src]</a></h4><div class='docblock'><p>Called when Glean is initialized to the point where it can correctly
assemble pings. Usually called from the language specific layer after all
of the core metrics have been set and the ping types have been
registered.</p>
<h1 id="return-value" class="section-header"><a href="#return-value">Return value</a></h1>
<p><code>true</code> if at least one ping was generated, <code>false</code> otherwise.</p>
</div><h4 id='method.set_upload_enabled' class="method"><code id='set_upload_enabled.v'>pub fn <a href='#method.set_upload_enabled' class='fnname'>set_upload_enabled</a>(&amp;mut self, flag: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.bool.html">bool</a>) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.bool.html">bool</a></code><a class='srclink' href='../src/glean_core/lib.rs.html#327-340' title='goto source code'>[src]</a></h4><div class='docblock'><p>Set whether upload is enabled or not.</p>
<p>When uploading is disabled, metrics aren't recorded at all and no
data is uploaded.</p>
<p>When disabling, all pending metrics, events and queued pings are cleared.</p>
<p>When enabling, the core Glean metrics are recreated.</p>
<p>If the value of this flag is not actually changed, this is a no-op.</p>
<h1 id="arguments" class="section-header"><a href="#arguments">Arguments</a></h1>
<ul>
<li><code>flag</code> - When true, enable metric collection.</li>
</ul>
<h1 id="returns" class="section-header"><a href="#returns">Returns</a></h1>
<ul>
<li>Returns true when the flag was different from the current value, and
actual work was done to clear or reinstate metrics.</li>
</ul>
</div><h4 id='method.is_upload_enabled' class="method"><code id='is_upload_enabled.v'>pub fn <a href='#method.is_upload_enabled' class='fnname'>is_upload_enabled</a>(&amp;self) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.bool.html">bool</a></code><a class='srclink' href='../src/glean_core/lib.rs.html#345-347' title='goto source code'>[src]</a></h4><div class='docblock'><p>Determine whether upload is enabled.</p>
<p>When upload is disabled, no data will be recorded.</p>
</div><h4 id='method.get_application_id' class="method"><code id='get_application_id.v'>pub fn <a href='#method.get_application_id' class='fnname'>get_application_id</a>(&amp;self) -&gt; &amp;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.str.html">str</a></code><a class='srclink' href='../src/glean_core/lib.rs.html#438-440' title='goto source code'>[src]</a></h4><div class='docblock'><p>Get the application ID as specified on instantiation.</p>
</div><h4 id='method.get_data_path' class="method"><code id='get_data_path.v'>pub fn <a href='#method.get_data_path' class='fnname'>get_data_path</a>(&amp;self) -&gt; &amp;<a class="struct" href="https://doc.rust-lang.org/nightly/std/path/struct.Path.html" title="struct std::path::Path">Path</a></code><a class='srclink' href='../src/glean_core/lib.rs.html#443-445' title='goto source code'>[src]</a></h4><div class='docblock'><p>Get the data path of this instance.</p>
</div><h4 id='method.storage' class="method"><code id='storage.v'>pub fn <a href='#method.storage' class='fnname'>storage</a>(&amp;self) -&gt; &amp;Database</code><a class='srclink' href='../src/glean_core/lib.rs.html#448-450' title='goto source code'>[src]</a></h4><div class='docblock'><p>Get a handle to the database.</p>
</div><h4 id='method.event_storage' class="method"><code id='event_storage.v'>pub fn <a href='#method.event_storage' class='fnname'>event_storage</a>(&amp;self) -&gt; &amp;EventDatabase</code><a class='srclink' href='../src/glean_core/lib.rs.html#453-455' title='goto source code'>[src]</a></h4><div class='docblock'><p>Get a handle to the event database.</p>
</div><h4 id='method.get_max_events' class="method"><code id='get_max_events.v'>pub fn <a href='#method.get_max_events' class='fnname'>get_max_events</a>(&amp;self) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a></code><a class='srclink' href='../src/glean_core/lib.rs.html#458-460' title='goto source code'>[src]</a></h4><div class='docblock'><p>Get the maximum number of events to store before sending a ping.</p>
</div><h4 id='method.get_upload_task' class="method"><code id='get_upload_task.v'>pub fn <a href='#method.get_upload_task' class='fnname'>get_upload_task</a>(&amp;self) -&gt; <a class="enum" href="../glean_core/upload/enum.PingUploadTask.html" title="enum glean_core::upload::PingUploadTask">PingUploadTask</a></code><a class='srclink' href='../src/glean_core/lib.rs.html#473-475' title='goto source code'>[src]</a></h4><div class='docblock'><p>Gets the next task for an uploader.</p>
<p>This can be one of:</p>
<ul>
<li><code>Wait</code> - which means the requester should ask again later;</li>
<li><code>Upload(PingRequest)</code> - which means there is a ping to upload. This wraps the actual request object;</li>
<li><code>Done</code> - which means there are no more pings queued right now.</li>
</ul>
<h1 id="return-value-1" class="section-header"><a href="#return-value-1">Return value</a></h1>
<p><code>PingUploadTask</code> - an enum representing the possible tasks.</p>
</div><h4 id='method.process_ping_upload_response' class="method"><code id='process_ping_upload_response.v'>pub fn <a href='#method.process_ping_upload_response' class='fnname'>process_ping_upload_response</a>(&amp;self, uuid: &amp;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.str.html">str</a>, status: <a class="enum" href="../glean_core/upload/enum.UploadResult.html" title="enum glean_core::upload::UploadResult">UploadResult</a>)</code><a class='srclink' href='../src/glean_core/lib.rs.html#483-486' title='goto source code'>[src]</a></h4><div class='docblock'><p>Processes the response from an attempt to upload a ping.</p>
<h1 id="arguments-1" class="section-header"><a href="#arguments-1">Arguments</a></h1>
<ul>
<li><code>uuid</code> - The UUID of the ping in question.</li>
<li><code>status</code> - The upload result.</li>
</ul>
</div><h4 id='method.snapshot' class="method"><code id='snapshot.v'>pub fn <a href='#method.snapshot' class='fnname'>snapshot</a>(&amp;mut self, store_name: &amp;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.str.html">str</a>, clear_store: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.bool.html">bool</a>) -&gt; <a class="struct" href="https://doc.rust-lang.org/nightly/alloc/string/struct.String.html" title="struct alloc::string::String">String</a></code><a class='srclink' href='../src/glean_core/lib.rs.html#499-503' title='goto source code'>[src]</a></h4><div class='docblock'><p>Take a snapshot for the given store and optionally clear it.</p>
<h2 id="arguments-2" class="section-header"><a href="#arguments-2">Arguments</a></h2>
<ul>
<li><code>store_name</code> - The store to snapshot.</li>
<li><code>clear_store</code> - Whether to clear the store after snapshotting.</li>
</ul>
<h2 id="return-value-2" class="section-header"><a href="#return-value-2">Return value</a></h2>
<p>Returns the snapshot in a string encoded as JSON.
If the snapshot is empty, it returns an empty string.</p>
</div><h4 id='method.submit_ping' class="method"><code id='submit_ping.v'>pub fn <a href='#method.submit_ping' class='fnname'>submit_ping</a>(&amp;self, ping: &amp;<a class="struct" href="../glean_core/metrics/struct.PingType.html" title="struct glean_core::metrics::PingType">PingType</a>, reason: <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;&amp;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.str.html">str</a>&gt;) -&gt; <a class="type" href="../glean_core/type.Result.html" title="type glean_core::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.bool.html">bool</a>&gt;</code><a class='srclink' href='../src/glean_core/lib.rs.html#529-568' title='goto source code'>[src]</a></h4><div class='docblock'><p>Collect and submit a ping for eventual uploading.</p>
<p>The ping content is assembled as soon as possible, but upload is not
guaranteed to happen immediately, as that depends on the upload
policies.</p>
<p>If the ping currently contains no content, it will not be sent.</p>
<p>Returns true if a ping was assembled and queued, false otherwise.
Returns an error if collecting or writing the ping to disk failed.</p>
<h2 id="arguments-3" class="section-header"><a href="#arguments-3">Arguments</a></h2>
<ul>
<li><code>ping</code>: The ping to submit</li>
<li><code>reason</code>: A reason code to include in the ping</li>
</ul>
</div><h4 id='method.submit_ping_by_name' class="method"><code id='submit_ping_by_name.v'>pub fn <a href='#method.submit_ping_by_name' class='fnname'>submit_ping_by_name</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;self, <br>&nbsp;&nbsp;&nbsp;&nbsp;ping_name: &amp;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.str.html">str</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;reason: <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;&amp;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.str.html">str</a>&gt;<br>) -&gt; <a class="type" href="../glean_core/type.Result.html" title="type glean_core::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.bool.html">bool</a>&gt;</code><a class='srclink' href='../src/glean_core/lib.rs.html#584-592' title='goto source code'>[src]</a></h4><div class='docblock'><p>Collect and submit a ping by name for eventual uploading.</p>
<p>The ping content is assembled as soon as possible, but upload is not
guaranteed to happen immediately, as that depends on the upload
policies.</p>
<p>If the ping currently contains no content, it will not be sent.</p>
<p>Returns true if a ping was assembled and queued, false otherwise.
Returns an error if collecting or writing the ping to disk failed.</p>
<h2 id="arguments-4" class="section-header"><a href="#arguments-4">Arguments</a></h2>
<ul>
<li><code>ping_name</code>: The name of the ping to submit</li>
<li><code>reason</code>: A reason code to include in the ping</li>
</ul>
</div><h4 id='method.get_ping_by_name' class="method"><code id='get_ping_by_name.v'>pub fn <a href='#method.get_ping_by_name' class='fnname'>get_ping_by_name</a>(&amp;self, ping_name: &amp;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.str.html">str</a>) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;&amp;<a class="struct" href="../glean_core/metrics/struct.PingType.html" title="struct glean_core::metrics::PingType">PingType</a>&gt;</code><a class='srclink' href='../src/glean_core/lib.rs.html#600-602' title='goto source code'>[src]</a></h4><div class='docblock'><p>Get a <a href="metrics/struct.PingType.html"><code>PingType</code></a> by name.</p>
<h2 id="return-value-3" class="section-header"><a href="#return-value-3">Return value</a></h2>
<p>Returns the <code>PingType</code> if a ping of the given name was registered before.
Returns <code>None</code> otherwise.</p>
</div><h4 id='method.register_ping_type' class="method"><code id='register_ping_type.v'>pub fn <a href='#method.register_ping_type' class='fnname'>register_ping_type</a>(&amp;mut self, ping: &amp;<a class="struct" href="../glean_core/metrics/struct.PingType.html" title="struct glean_core::metrics::PingType">PingType</a>)</code><a class='srclink' href='../src/glean_core/lib.rs.html#605-611' title='goto source code'>[src]</a></h4><div class='docblock'><p>Register a new <a href="metrics/struct.PingType.html"><code>PingType</code></a>.</p>
</div><h4 id='method.set_experiment_active' class="method"><code id='set_experiment_active.v'>pub fn <a href='#method.set_experiment_active' class='fnname'>set_experiment_active</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;self, <br>&nbsp;&nbsp;&nbsp;&nbsp;experiment_id: <a class="struct" href="https://doc.rust-lang.org/nightly/alloc/string/struct.String.html" title="struct alloc::string::String">String</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;branch: <a class="struct" href="https://doc.rust-lang.org/nightly/alloc/string/struct.String.html" title="struct alloc::string::String">String</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;extra: <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/std/collections/hash/map/struct.HashMap.html" title="struct std::collections::hash::map::HashMap">HashMap</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/alloc/string/struct.String.html" title="struct alloc::string::String">String</a>, <a class="struct" href="https://doc.rust-lang.org/nightly/alloc/string/struct.String.html" title="struct alloc::string::String">String</a>&gt;&gt;<br>)</code><a class='srclink' href='../src/glean_core/lib.rs.html#627-635' title='goto source code'>[src]</a></h4><div class='docblock'><p>Indicate that an experiment is running.
Glean will then add an experiment annotation to the environment
which is sent with pings. This information is not persisted between runs.</p>
<h2 id="arguments-5" class="section-header"><a href="#arguments-5">Arguments</a></h2>
<ul>
<li><code>experiment_id</code> - The id of the active experiment (maximum 30 bytes).</li>
<li><code>branch</code> - The experiment branch (maximum 30 bytes).</li>
<li><code>extra</code> - Optional metadata to output with the ping.</li>
</ul>
</div><h4 id='method.set_experiment_inactive' class="method"><code id='set_experiment_inactive.v'>pub fn <a href='#method.set_experiment_inactive' class='fnname'>set_experiment_inactive</a>(&amp;self, experiment_id: <a class="struct" href="https://doc.rust-lang.org/nightly/alloc/string/struct.String.html" title="struct alloc::string::String">String</a>)</code><a class='srclink' href='../src/glean_core/lib.rs.html#642-645' title='goto source code'>[src]</a></h4><div class='docblock'><p>Indicate that an experiment is no longer running.</p>
<h2 id="arguments-6" class="section-header"><a href="#arguments-6">Arguments</a></h2>
<ul>
<li><code>experiment_id</code> - The id of the active experiment to deactivate (maximum 30 bytes).</li>
</ul>
</div><h4 id='method.persist_ping_lifetime_data' class="method"><code id='persist_ping_lifetime_data.v'>pub fn <a href='#method.persist_ping_lifetime_data' class='fnname'>persist_ping_lifetime_data</a>(&amp;self) -&gt; <a class="type" href="../glean_core/type.Result.html" title="type glean_core::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a>&gt;</code><a class='srclink' href='../src/glean_core/lib.rs.html#652-658' title='goto source code'>[src]</a></h4><div class='docblock'><p>Persist Lifetime::Ping data that might be in memory
in case <code>delay_ping_lifetime_io</code> is set or was set
at a previous time.</p>
<p>If there is no data to persist, this function does nothing.</p>
</div><h4 id='method.clear_application_lifetime_metrics' class="method"><code id='clear_application_lifetime_metrics.v'>pub fn <a href='#method.clear_application_lifetime_metrics' class='fnname'>clear_application_lifetime_metrics</a>(&amp;self)</code><a class='srclink' href='../src/glean_core/lib.rs.html#668-676' title='goto source code'>[src]</a></h4><div class='docblock'><p>** This is not meant to be used directly.**</p>
<p>Clear all the metrics that have <code>Lifetime::Application</code>.</p>
</div><h4 id='method.is_first_run' class="method"><code id='is_first_run.v'>pub fn <a href='#method.is_first_run' class='fnname'>is_first_run</a>(&amp;self) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.bool.html">bool</a></code><a class='srclink' href='../src/glean_core/lib.rs.html#679-681' title='goto source code'>[src]</a></h4><div class='docblock'><p>Return whether or not this is the first run on this profile.</p>
</div><h4 id='method.set_dirty_flag' class="method"><code id='set_dirty_flag.v'>pub fn <a href='#method.set_dirty_flag' class='fnname'>set_dirty_flag</a>(&amp;self, new_value: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.bool.html">bool</a>)</code><a class='srclink' href='../src/glean_core/lib.rs.html#708-710' title='goto source code'>[src]</a></h4><div class='docblock'><p>** This is not meant to be used directly.**</p>
<p>Set the value of a &quot;dirty flag&quot; in the permanent storage.
The &quot;dirty flag&quot; is meant to have the following behaviour, implemented
by the consumers of the FFI layer:</p>
<ul>
<li>on mobile: set to <code>false</code> when going to background or shutting down,
set to <code>true</code> at startup and when going to foreground.</li>
<li>on non-mobile platforms: set to <code>true</code> at startup and <code>false</code> at
shutdown.</li>
</ul>
<p>At startup, before setting its new value, if the &quot;dirty flag&quot; value is
<code>true</code>, then Glean knows it did not exit cleanly and can implement
coping mechanisms (e.g. sending a <code>baseline</code> ping).</p>
</div><h4 id='method.is_dirty_flag_set' class="method"><code id='is_dirty_flag_set.v'>pub fn <a href='#method.is_dirty_flag_set' class='fnname'>is_dirty_flag_set</a>(&amp;self) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.bool.html">bool</a></code><a class='srclink' href='../src/glean_core/lib.rs.html#715-725' title='goto source code'>[src]</a></h4><div class='docblock'><p>** This is not meant to be used directly.**</p>
<p>Check the stored value of the &quot;dirty flag&quot;.</p>
</div><h4 id='method.test_is_experiment_active' class="method"><code id='test_is_experiment_active.v'>pub fn <a href='#method.test_is_experiment_active' class='fnname'>test_is_experiment_active</a>(&amp;self, experiment_id: <a class="struct" href="https://doc.rust-lang.org/nightly/alloc/string/struct.String.html" title="struct alloc::string::String">String</a>) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.bool.html">bool</a></code><a class='srclink' href='../src/glean_core/lib.rs.html#738-741' title='goto source code'>[src]</a></h4><div class='docblock'><p><strong>Test-only API (exported for FFI purposes).</strong></p>
<p>Check if an experiment is currently active.</p>
<h2 id="arguments-7" class="section-header"><a href="#arguments-7">Arguments</a></h2>
<ul>
<li><code>experiment_id</code> - The id of the experiment (maximum 30 bytes).</li>
</ul>
<h2 id="return-value-4" class="section-header"><a href="#return-value-4">Return value</a></h2>
<p>True if the experiment is active, false otherwise.</p>
</div><h4 id='method.test_get_experiment_data_as_json' class="method"><code id='test_get_experiment_data_as_json.v'>pub fn <a href='#method.test_get_experiment_data_as_json' class='fnname'>test_get_experiment_data_as_json</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;self, <br>&nbsp;&nbsp;&nbsp;&nbsp;experiment_id: <a class="struct" href="https://doc.rust-lang.org/nightly/alloc/string/struct.String.html" title="struct alloc::string::String">String</a><br>) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/alloc/string/struct.String.html" title="struct alloc::string::String">String</a>&gt;</code><a class='srclink' href='../src/glean_core/lib.rs.html#756-759' title='goto source code'>[src]</a></h4><div class='docblock'><p><strong>Test-only API (exported for FFI purposes).</strong></p>
<p>Get stored data for the requested experiment.</p>
<h2 id="arguments-8" class="section-header"><a href="#arguments-8">Arguments</a></h2>
<ul>
<li><code>experiment_id</code> - The id of the active experiment (maximum 30 bytes).</li>
</ul>
<h2 id="return-value-5" class="section-header"><a href="#return-value-5">Return value</a></h2>
<p>If the requested experiment is active, a JSON string with the following format:
{ 'branch': 'the-branch-name', 'extra': {'key': 'value', ...}}
Otherwise, None.</p>
</div><h4 id='method.test_clear_all_stores' class="method"><code id='test_clear_all_stores.v'>pub fn <a href='#method.test_clear_all_stores' class='fnname'>test_clear_all_stores</a>(&amp;self)</code><a class='srclink' href='../src/glean_core/lib.rs.html#766-772' title='goto source code'>[src]</a></h4><div class='docblock'><p><strong>Test-only API (exported for FFI purposes).</strong></p>
<p>Delete all stored metrics.
Note that this also includes the ping sequence numbers, so it has
the effect of resetting those to their initial values.</p>
</div></div><h2 id='implementations' class='small-section-header'>Trait Implementations<a href='#implementations' class='anchor'></a></h2><div id='implementations-list'><h3 id='impl-Debug' class='impl'><code class='in-band'>impl <a class="trait" href="https://doc.rust-lang.org/nightly/core/fmt/trait.Debug.html" title="trait core::fmt::Debug">Debug</a> for <a class="struct" href="../glean_core/struct.Glean.html" title="struct glean_core::Glean">Glean</a></code><a href='#impl-Debug' class='anchor'></a><a class='srclink' href='../src/glean_core/lib.rs.html#162' title='goto source code'>[src]</a></h3><div class='impl-items'><h4 id='method.fmt' class="method hidden"><code id='fmt.v'>fn <a href='https://doc.rust-lang.org/nightly/core/fmt/trait.Debug.html#tymethod.fmt' class='fnname'>fmt</a>(&amp;self, f: &amp;mut <a class="struct" href="https://doc.rust-lang.org/nightly/core/fmt/struct.Formatter.html" title="struct core::fmt::Formatter">Formatter</a>) -&gt; <a class="type" href="https://doc.rust-lang.org/nightly/core/fmt/type.Result.html" title="type core::fmt::Result">Result</a></code><a class='srclink' href='../src/glean_core/lib.rs.html#162' title='goto source code'>[src]</a></h4><div class='docblock hidden'><p>Formats the value using the given formatter. <a href="https://doc.rust-lang.org/nightly/core/fmt/trait.Debug.html#tymethod.fmt">Read more</a></p>
</div></div></div><h2 id='synthetic-implementations' class='small-section-header'>Auto Trait Implementations<a href='#synthetic-implementations' class='anchor'></a></h2><div id='synthetic-implementations-list'><h3 id='impl-RefUnwindSafe' class='impl'><code class='in-band'>impl <a class="trait" href="https://doc.rust-lang.org/nightly/std/panic/trait.RefUnwindSafe.html" title="trait std::panic::RefUnwindSafe">RefUnwindSafe</a> for <a class="struct" href="../glean_core/struct.Glean.html" title="struct glean_core::Glean">Glean</a></code><a href='#impl-RefUnwindSafe' class='anchor'></a></h3><div class='impl-items'></div><h3 id='impl-Send' class='impl'><code class='in-band'>impl <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> for <a class="struct" href="../glean_core/struct.Glean.html" title="struct glean_core::Glean">Glean</a></code><a href='#impl-Send' class='anchor'></a></h3><div class='impl-items'></div><h3 id='impl-Sync' class='impl'><code class='in-band'>impl <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Sync.html" title="trait core::marker::Sync">Sync</a> for <a class="struct" href="../glean_core/struct.Glean.html" title="struct glean_core::Glean">Glean</a></code><a href='#impl-Sync' class='anchor'></a></h3><div class='impl-items'></div><h3 id='impl-Unpin' class='impl'><code class='in-band'>impl <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Unpin.html" title="trait core::marker::Unpin">Unpin</a> for <a class="struct" href="../glean_core/struct.Glean.html" title="struct glean_core::Glean">Glean</a></code><a href='#impl-Unpin' class='anchor'></a></h3><div class='impl-items'></div><h3 id='impl-UnwindSafe' class='impl'><code class='in-band'>impl <a class="trait" href="https://doc.rust-lang.org/nightly/std/panic/trait.UnwindSafe.html" title="trait std::panic::UnwindSafe">UnwindSafe</a> for <a class="struct" href="../glean_core/struct.Glean.html" title="struct glean_core::Glean">Glean</a></code><a href='#impl-UnwindSafe' class='anchor'></a></h3><div class='impl-items'></div></div><h2 id='blanket-implementations' class='small-section-header'>Blanket Implementations<a href='#blanket-implementations' class='anchor'></a></h2><div id='blanket-implementations-list'><h3 id='impl-Any' class='impl'><code class='in-band'>impl&lt;T&gt; <a class="trait" href="https://doc.rust-lang.org/nightly/core/any/trait.Any.html" title="trait core::any::Any">Any</a> for T <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;T: 'static + ?<a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a>,&nbsp;</span></code><a href='#impl-Any' class='anchor'></a><a class='srclink' href='https://doc.rust-lang.org/nightly/src/core/any.rs.html#108-112' title='goto source code'>[src]</a></h3><div class='impl-items'><h4 id='method.type_id' class="method hidden"><code id='type_id.v'>fn <a href='https://doc.rust-lang.org/nightly/core/any/trait.Any.html#tymethod.type_id' class='fnname'>type_id</a>(&amp;self) -&gt; <a class="struct" href="https://doc.rust-lang.org/nightly/core/any/struct.TypeId.html" title="struct core::any::TypeId">TypeId</a></code><a class='srclink' href='https://doc.rust-lang.org/nightly/src/core/any.rs.html#109-111' title='goto source code'>[src]</a></h4><div class='docblock hidden'><p>Gets the <code>TypeId</code> of <code>self</code>. <a href="https://doc.rust-lang.org/nightly/core/any/trait.Any.html#tymethod.type_id">Read more</a></p>
</div></div><h3 id='impl-Borrow%3CT%3E' class='impl'><code class='in-band'>impl&lt;T&gt; <a class="trait" href="https://doc.rust-lang.org/nightly/core/borrow/trait.Borrow.html" title="trait core::borrow::Borrow">Borrow</a>&lt;T&gt; for T <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;T: ?<a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a>,&nbsp;</span></code><a href='#impl-Borrow%3CT%3E' class='anchor'></a><a class='srclink' href='https://doc.rust-lang.org/nightly/src/core/borrow.rs.html#213-217' title='goto source code'>[src]</a></h3><div class='impl-items'><h4 id='method.borrow' class="method hidden"><code id='borrow.v'>fn <a href='https://doc.rust-lang.org/nightly/core/borrow/trait.Borrow.html#tymethod.borrow' class='fnname'>borrow</a>(&amp;self) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.reference.html">&amp;</a>T</code><a class='srclink' href='https://doc.rust-lang.org/nightly/src/core/borrow.rs.html#214-216' title='goto source code'>[src]</a></h4><div class='docblock hidden'><p>Immutably borrows from an owned value. <a href="https://doc.rust-lang.org/nightly/core/borrow/trait.Borrow.html#tymethod.borrow">Read more</a></p>
</div></div><h3 id='impl-BorrowMut%3CT%3E' class='impl'><code class='in-band'>impl&lt;T&gt; <a class="trait" href="https://doc.rust-lang.org/nightly/core/borrow/trait.BorrowMut.html" title="trait core::borrow::BorrowMut">BorrowMut</a>&lt;T&gt; for T <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;T: ?<a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a>,&nbsp;</span></code><a href='#impl-BorrowMut%3CT%3E' class='anchor'></a><a class='srclink' href='https://doc.rust-lang.org/nightly/src/core/borrow.rs.html#220-224' title='goto source code'>[src]</a></h3><div class='impl-items'><h4 id='method.borrow_mut' class="method hidden"><code id='borrow_mut.v'>fn <a href='https://doc.rust-lang.org/nightly/core/borrow/trait.BorrowMut.html#tymethod.borrow_mut' class='fnname'>borrow_mut</a>(&amp;mut self) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.reference.html">&amp;mut </a>T</code><a class='srclink' href='https://doc.rust-lang.org/nightly/src/core/borrow.rs.html#221-223' title='goto source code'>[src]</a></h4><div class='docblock hidden'><p>Mutably borrows from an owned value. <a href="https://doc.rust-lang.org/nightly/core/borrow/trait.BorrowMut.html#tymethod.borrow_mut">Read more</a></p>
</div></div><h3 id='impl-From%3CT%3E' class='impl'><code class='in-band'>impl&lt;T&gt; <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.From.html" title="trait core::convert::From">From</a>&lt;T&gt; for T</code><a href='#impl-From%3CT%3E' class='anchor'></a><a class='srclink' href='https://doc.rust-lang.org/nightly/src/core/convert/mod.rs.html#564-568' title='goto source code'>[src]</a></h3><div class='impl-items'><h4 id='method.from' class="method hidden"><code id='from.v'>fn <a href='https://doc.rust-lang.org/nightly/core/convert/trait.From.html#tymethod.from' class='fnname'>from</a>(t: T) -&gt; T</code><a class='srclink' href='https://doc.rust-lang.org/nightly/src/core/convert/mod.rs.html#565-567' title='goto source code'>[src]</a></h4><div class='docblock hidden'><p>Performs the conversion.</p>
</div></div><h3 id='impl-Into%3CU%3E' class='impl'><code class='in-band'>impl&lt;T, U&gt; <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.Into.html" title="trait core::convert::Into">Into</a>&lt;U&gt; for T <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;U: <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.From.html" title="trait core::convert::From">From</a>&lt;T&gt;,&nbsp;</span></code><a href='#impl-Into%3CU%3E' class='anchor'></a><a class='srclink' href='https://doc.rust-lang.org/nightly/src/core/convert/mod.rs.html#553-560' title='goto source code'>[src]</a></h3><div class='impl-items'><h4 id='method.into' class="method hidden"><code id='into.v'>fn <a href='https://doc.rust-lang.org/nightly/core/convert/trait.Into.html#tymethod.into' class='fnname'>into</a>(self) -&gt; U</code><a class='srclink' href='https://doc.rust-lang.org/nightly/src/core/convert/mod.rs.html#557-559' title='goto source code'>[src]</a></h4><div class='docblock hidden'><p>Performs the conversion.</p>
</div></div><h3 id='impl-TryFrom%3CU%3E' class='impl'><code class='in-band'>impl&lt;T, U&gt; <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.TryFrom.html" title="trait core::convert::TryFrom">TryFrom</a>&lt;U&gt; for T <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;U: <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.Into.html" title="trait core::convert::Into">Into</a>&lt;T&gt;,&nbsp;</span></code><a href='#impl-TryFrom%3CU%3E' class='anchor'></a><a class='srclink' href='https://doc.rust-lang.org/nightly/src/core/convert/mod.rs.html#601-610' title='goto source code'>[src]</a></h3><div class='impl-items'><h4 id='associatedtype.Error' class="type"><code id='Error.t'>type <a href='https://doc.rust-lang.org/nightly/core/convert/trait.TryFrom.html#associatedtype.Error' class="type">Error</a> = <a class="enum" href="https://doc.rust-lang.org/nightly/core/convert/enum.Infallible.html" title="enum core::convert::Infallible">Infallible</a></code></h4><div class='docblock'><p>The type returned in the event of a conversion error.</p>
</div><h4 id='method.try_from' class="method hidden"><code id='try_from.v'>fn <a href='https://doc.rust-lang.org/nightly/core/convert/trait.TryFrom.html#tymethod.try_from' class='fnname'>try_from</a>(value: U) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;T, &lt;T as <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.TryFrom.html" title="trait core::convert::TryFrom">TryFrom</a>&lt;U&gt;&gt;::<a class="type" href="https://doc.rust-lang.org/nightly/core/convert/trait.TryFrom.html#associatedtype.Error" title="type core::convert::TryFrom::Error">Error</a>&gt;</code><a class='srclink' href='https://doc.rust-lang.org/nightly/src/core/convert/mod.rs.html#607-609' title='goto source code'>[src]</a></h4><div class='docblock hidden'><p>Performs the conversion.</p>
</div></div><h3 id='impl-TryInto%3CU%3E' class='impl'><code class='in-band'>impl&lt;T, U&gt; <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.TryInto.html" title="trait core::convert::TryInto">TryInto</a>&lt;U&gt; for T <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;U: <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.TryFrom.html" title="trait core::convert::TryFrom">TryFrom</a>&lt;T&gt;,&nbsp;</span></code><a href='#impl-TryInto%3CU%3E' class='anchor'></a><a class='srclink' href='https://doc.rust-lang.org/nightly/src/core/convert/mod.rs.html#587-596' title='goto source code'>[src]</a></h3><div class='impl-items'><h4 id='associatedtype.Error-1' class="type"><code id='Error.t-1'>type <a href='https://doc.rust-lang.org/nightly/core/convert/trait.TryInto.html#associatedtype.Error' class="type">Error</a> = &lt;U as <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.TryFrom.html" title="trait core::convert::TryFrom">TryFrom</a>&lt;T&gt;&gt;::<a class="type" href="https://doc.rust-lang.org/nightly/core/convert/trait.TryFrom.html#associatedtype.Error" title="type core::convert::TryFrom::Error">Error</a></code></h4><div class='docblock'><p>The type returned in the event of a conversion error.</p>
</div><h4 id='method.try_into' class="method hidden"><code id='try_into.v'>fn <a href='https://doc.rust-lang.org/nightly/core/convert/trait.TryInto.html#tymethod.try_into' class='fnname'>try_into</a>(self) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;U, &lt;U as <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.TryFrom.html" title="trait core::convert::TryFrom">TryFrom</a>&lt;T&gt;&gt;::<a class="type" href="https://doc.rust-lang.org/nightly/core/convert/trait.TryFrom.html#associatedtype.Error" title="type core::convert::TryFrom::Error">Error</a>&gt;</code><a class='srclink' href='https://doc.rust-lang.org/nightly/src/core/convert/mod.rs.html#593-595' title='goto source code'>[src]</a></h4><div class='docblock hidden'><p>Performs the conversion.</p>
</div></div><h3 id='impl-VZip%3CV%3E' class='impl'><code class='in-band'>impl&lt;V, T&gt; VZip&lt;V&gt; for T <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;V: MultiLane&lt;T&gt;,&nbsp;</span></code><a href='#impl-VZip%3CV%3E' class='anchor'></a></h3><div class='impl-items'><h4 id='method.vzip' class="method hidden"><code id='vzip.v'>fn <a href='#method.vzip' class='fnname'>vzip</a>(self) -&gt; V</code></h4></div></div></section><section id="search" class="content hidden"></section><section class="footer"></section><script>window.rootPath = "../";window.currentCrate = "glean_core";</script><script src="../aliases.js"></script><script src="../main.js"></script><script defer src="../search-index.js"></script></body></html>